{"ast":null,"code":"import Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../email-management-service/email-manaement.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\n\nfunction UnsubscribeEmailComponent_div_2_div_37_div_4_div_1_p_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 29);\n    i0.ɵɵtext(1, \"Please enter description!\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction UnsubscribeEmailComponent_div_2_div_37_div_4_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, UnsubscribeEmailComponent_div_2_div_37_div_4_div_1_p_1_Template, 2, 0, \"p\", 28);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext(2);\n\n    const _r9 = i0.ɵɵreference(2);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r9.errors == null ? null : _r9.errors.required);\n  }\n}\n\nfunction UnsubscribeEmailComponent_div_2_div_37_div_4_p_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 30);\n    i0.ɵɵtext(1, \" Description size should be less than 250 characters \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction UnsubscribeEmailComponent_div_2_div_37_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, UnsubscribeEmailComponent_div_2_div_37_div_4_div_1_Template, 2, 1, \"div\", 27);\n    i0.ɵɵtemplate(2, UnsubscribeEmailComponent_div_2_div_37_div_4_p_2_Template, 2, 0, \"p\", 22);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r9 = i0.ɵɵreference(2);\n\n    i0.ɵɵnextContext();\n\n    const _r2 = i0.ɵɵreference(7);\n\n    const ctx_r10 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r9.touched || _r2.submitted);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (ctx_r10.unsubscibeInfo.bounceReason == null ? null : ctx_r10.unsubscibeInfo.bounceReason.length) > 250);\n  }\n}\n\nfunction UnsubscribeEmailComponent_div_2_div_37_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 16)(1, \"textarea\", 25, 26);\n    i0.ɵɵlistener(\"ngModelChange\", function UnsubscribeEmailComponent_div_2_div_37_Template_textarea_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext(2);\n      return ctx_r14.unsubscibeInfo.bounceReason = $event;\n    });\n    i0.ɵɵtext(3, \" \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, UnsubscribeEmailComponent_div_2_div_37_div_4_Template, 3, 2, \"div\", 27);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const _r9 = i0.ɵɵreference(2);\n\n    i0.ɵɵnextContext();\n\n    const _r2 = i0.ɵɵreference(7);\n\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r7.unsubscibeInfo.bounceReason);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", _r2.submitted && _r9.invalid || _r9.touched);\n  }\n}\n\nfunction UnsubscribeEmailComponent_div_2_p_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 30);\n    i0.ɵɵtext(1, \" Please select reason! \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction UnsubscribeEmailComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"div\", 5)(2, \"h3\", 6)(3, \"strong\");\n    i0.ɵɵtext(4, \"Unsubscribe \");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(5, \"div\", 7)(6, \"form\", 8, 9);\n    i0.ɵɵlistener(\"ngSubmit\", function UnsubscribeEmailComponent_div_2_Template_form_ngSubmit_6_listener() {\n      i0.ɵɵrestoreView(_r17);\n\n      const _r2 = i0.ɵɵreference(7);\n\n      const ctx_r16 = i0.ɵɵnextContext();\n      return _r2.form.valid && ctx_r16.unsubscribeMail(_r2);\n    });\n    i0.ɵɵelementStart(8, \"h5\", 10)(9, \"strong\");\n    i0.ɵɵtext(10, \"Would you like to share reason of unsubscribing ? \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(11, \"hr\");\n    i0.ɵɵelementStart(12, \"div\", 11)(13, \"div\", 12)(14, \"span\", 13)(15, \"input\", 14, 15);\n    i0.ɵɵlistener(\"ngModelChange\", function UnsubscribeEmailComponent_div_2_Template_input_ngModelChange_15_listener($event) {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return ctx_r18.unsubscibeInfo.value1 = $event;\n    })(\"change\", function UnsubscribeEmailComponent_div_2_Template_input_change_15_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r19 = i0.ɵɵnextContext();\n      return ctx_r19.chkClick();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"span\", 16);\n    i0.ɵɵtext(18, \"I'm not interested anymore\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(19, \"div\", 12)(20, \"span\", 17)(21, \"input\", 18, 15);\n    i0.ɵɵlistener(\"ngModelChange\", function UnsubscribeEmailComponent_div_2_Template_input_ngModelChange_21_listener($event) {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r20 = i0.ɵɵnextContext();\n      return ctx_r20.unsubscibeInfo.value1 = $event;\n    })(\"change\", function UnsubscribeEmailComponent_div_2_Template_input_change_21_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r21 = i0.ɵɵnextContext();\n      return ctx_r21.chkClick();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"span\", 16);\n    i0.ɵɵtext(24, \"I recieved too many of these email's\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(25, \"div\", 12)(26, \"span\", 17)(27, \"input\", 19, 15);\n    i0.ɵɵlistener(\"ngModelChange\", function UnsubscribeEmailComponent_div_2_Template_input_ngModelChange_27_listener($event) {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r22 = i0.ɵɵnextContext();\n      return ctx_r22.unsubscibeInfo.value1 = $event;\n    })(\"change\", function UnsubscribeEmailComponent_div_2_Template_input_change_27_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r23 = i0.ɵɵnextContext();\n      return ctx_r23.chkClick();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"span\", 16);\n    i0.ɵɵtext(30, \"This content is not relevant to me\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(31, \"div\")(32, \"span\", 17)(33, \"input\", 20, 15);\n    i0.ɵɵlistener(\"ngModelChange\", function UnsubscribeEmailComponent_div_2_Template_input_ngModelChange_33_listener($event) {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r24 = i0.ɵɵnextContext();\n      return ctx_r24.unsubscibeInfo.value1 = $event;\n    })(\"change\", function UnsubscribeEmailComponent_div_2_Template_input_change_33_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r25 = i0.ɵɵnextContext();\n      return ctx_r25.chkClick();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(35, \"span\", 16);\n    i0.ɵɵtext(36, \"Other\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(37, UnsubscribeEmailComponent_div_2_div_37_Template, 5, 2, \"div\", 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(38, UnsubscribeEmailComponent_div_2_p_38_Template, 2, 0, \"p\", 22);\n    i0.ɵɵelementStart(39, \"div\", 23)(40, \"button\", 24)(41, \"strong\");\n    i0.ɵɵtext(42, \"Unsubscribe\");\n    i0.ɵɵelementEnd()()()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(15);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.unsubscibeInfo.value1);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.unsubscibeInfo.value1);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.unsubscibeInfo.value1);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.unsubscibeInfo.value1);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.descflag);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.reqflg);\n  }\n}\n\nfunction UnsubscribeEmailComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"h3\", 31)(2, \"strong\");\n    i0.ɵɵtext(3, \"Invalid URL \");\n    i0.ɵɵelementEnd()()();\n  }\n}\n\nexport let UnsubscribeEmailComponent = /*#__PURE__*/(() => {\n  class UnsubscribeEmailComponent {\n    constructor(router, emailService) {\n      this.router = router;\n      this.emailService = emailService;\n      this.descflag = false;\n      this.invalidflg = false;\n      this.reqflg = false;\n      this.unsubscibeInfo = {\n        bounceReason: \"\",\n        value1: \"\"\n      };\n    }\n\n    ngOnInit() {\n      this.invalidflg = false;\n\n      if (!window.location.href.includes(\"?\") || !window.location.href.includes(\"$\")) {\n        this.invalidflg = true;\n      }\n\n      if (window.location.href.includes(\"?\") && window.location.href.includes(\"$\")) {\n        this.value = window.location.href.split(\"?\");\n        this.factCampaignSkey = this.value[1].split(\"$\")[0];\n        this.customerClientId = this.value[1].split(\"$\")[1].split(\"=\")[0];\n      }\n    }\n\n    chkClick() {\n      this.descflag = false;\n      this.reqflg = false;\n\n      if (this.unsubscibeInfo.value1 == \"Other\") {\n        this.descflag = true;\n        this.unsubscibeInfo.bounceReason = \"\";\n      } else {\n        this.descflag = false;\n        this.unsubscibeInfo.bounceReason = this.unsubscibeInfo.value1;\n      }\n    }\n\n    unsubscribeMail(unsubscribeMail) {\n      this.reqflg = false;\n\n      if (this.unsubscibeInfo.bounceReason != null && this.unsubscibeInfo.bounceReason != \"\" && this.unsubscibeInfo.bounceReason != undefined) {\n        let resp = this.emailService.getUnsubscribeCount(this.factCampaignSkey, this.customerClientId, this.unsubscibeInfo.bounceReason);\n        resp.subscribe(data => {\n          // Swal.fire(\"Unsubscribe sucessfully!\");\n          Swal.queue([{\n            title: 'Thanks',\n            confirmButtonText: 'OK',\n            text: 'You unsubscribe successfully.',\n            showLoaderOnConfirm: true,\n            preConfirm: () => {\n              window.close();\n            }\n          }]);\n        });\n      } else {\n        this.reqflg = true;\n      }\n    }\n\n  }\n\n  UnsubscribeEmailComponent.ɵfac = function UnsubscribeEmailComponent_Factory(t) {\n    return new (t || UnsubscribeEmailComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.EmailManaementService));\n  };\n\n  UnsubscribeEmailComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: UnsubscribeEmailComponent,\n    selectors: [[\"app-unsubscribe-email\"]],\n    decls: 4,\n    vars: 2,\n    consts: [[1, \"row\", \"mt-10\"], [1, \"col-md-4\", \"offset-md-4\"], [\"class\", \"card form-bg box-shadow\", 4, \"ngIf\"], [\"class\", \"card-body\", 4, \"ngIf\"], [1, \"card\", \"form-bg\", \"box-shadow\"], [1, \"card-header\", \"bg-white\", \"text-center\"], [1, \"formHeading\", \"text-center\", \"text-secondary\", \"mt-4\"], [1, \"card-body\"], [\"novalidate\", \"\", 3, \"ngSubmit\"], [\"unsubscribeform\", \"ngForm\"], [1, \"formHeading\", \"text-center\", \"mt-1\"], [1, \"p-3\"], [1, \"pb-2\"], [1, \"radio\", \"pt-1\"], [\"type\", \"radio\", \"name\", \"level\", \"name\", \"value1\", \"value\", \"I'm not interested anymore\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"value1\", \"ngModel\"], [1, \"p-2\"], [1, \"radio\"], [\"type\", \"radio\", \"name\", \"level\", \"value\", \" I recived too many of these emails\", \"name\", \"value1\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"type\", \"radio\", \"name\", \"level\", \"name\", \"value1\", \"value\", \"This content is not relevant to me\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"type\", \"radio\", \"name\", \"level\", \"value\", \"Other\", \"name\", \"value1\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"class\", \"p-2\", 4, \"ngIf\"], [\"style\", \"color:red\", 4, \"ngIf\"], [1, \"form-group\", \"text-center\", \"mt-4\"], [\"type\", \"submit\", 1, \"btn\", \"btn-info\", \"mg-t-10\"], [\"id\", \"bounceReason\", \"pattern\", \"^[a-zA-Z0-9_ !@#$%^&*()_+\\\\-=\\\\[\\\\]{};':\\\\\\\\|,.<>\\\\/?]*$\", \"placeholder\", \"Enter Description\", \"ng-maxlength\", \"255\", \"name\", \"bounceReason\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"bounceReason\", \"ngModel\"], [4, \"ngIf\"], [\"class\", \"help-box\", 4, \"ngIf\"], [1, \"help-box\"], [2, \"color\", \"red\"], [1, \"formHeading\", \"text-center\", \"mt-4\"]],\n    template: function UnsubscribeEmailComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        i0.ɵɵtemplate(2, UnsubscribeEmailComponent_div_2_Template, 43, 6, \"div\", 2);\n        i0.ɵɵtemplate(3, UnsubscribeEmailComponent_div_3_Template, 4, 0, \"div\", 3);\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.invalidflg == false);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.invalidflg);\n      }\n    },\n    directives: [i3.NgIf, i4.ɵNgNoValidate, i4.NgControlStatusGroup, i4.NgForm, i4.RadioControlValueAccessor, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel, i4.PatternValidator, i4.RequiredValidator],\n    styles: [\"\"]\n  });\n  return UnsubscribeEmailComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}