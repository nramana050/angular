{"ast":null,"code":"import Swal from 'sweetalert2';\nimport * as moment from 'moment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../email-management-service/email-manaement.service\";\nimport * as i3 from \"src/app/GobalAPIService/global-service-service/PreviewService\";\nimport * as i4 from \"ngx-order-pipe\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"ngx-pagination\";\nimport * as i8 from \"ng2-search-filter\";\n\nfunction ViewCampaignComponent_div_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 1, ctx_r0.campViewData.campaignStartDate, \"dd-MMM-yyyy 'at' h:mm a\"), \"\");\n  }\n}\n\nfunction ViewCampaignComponent_div_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵtext(1, \"NA\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ViewCampaignComponent_span_66_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"span\", 41);\n  }\n}\n\nfunction ViewCampaignComponent_div_67_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 42);\n    i0.ɵɵlistener(\"click\", function ViewCampaignComponent_div_67_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.download();\n    });\n    i0.ɵɵelement(1, \"i\", 43);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ViewCampaignComponent_tr_131_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelement(1, \"td\", 44)(2, \"td\", 44)(3, \"td\", 44)(4, \"td\", 44)(5, \"td\", 44);\n    i0.ɵɵelementStart(6, \"div\")(7, \"td\", 44)(8, \"span\", 45)(9, \"h5\");\n    i0.ɵɵtext(10, \"Please wait.....\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(11, \"br\");\n    i0.ɵɵelementStart(12, \"div\", 46)(13, \"div\", 47)(14, \"span\", 48);\n    i0.ɵɵtext(15, \"Please wait\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"span\", 48);\n    i0.ɵɵtext(17, \"Loading...\");\n    i0.ɵɵelementEnd()()()()()();\n  }\n}\n\nfunction ViewCampaignComponent_tr_132_td_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const camp_r10 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", camp_r10.delivered, \" \");\n  }\n}\n\nfunction ViewCampaignComponent_tr_132_td_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1, \"0\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ViewCampaignComponent_tr_132_td_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const camp_r10 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", camp_r10.totalOpen, \" \");\n  }\n}\n\nfunction ViewCampaignComponent_tr_132_td_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1, \"0\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ViewCampaignComponent_tr_132_td_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const camp_r10 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", camp_r10.totalClick, \"\");\n  }\n}\n\nfunction ViewCampaignComponent_tr_132_td_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1, \"0\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ViewCampaignComponent_tr_132_td_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const camp_r10 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", camp_r10.unsubscribed, \"\");\n  }\n}\n\nfunction ViewCampaignComponent_tr_132_td_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1, \" 0\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ViewCampaignComponent_tr_132_td_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const camp_r10 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", camp_r10.blacklisted, \"\");\n  }\n}\n\nfunction ViewCampaignComponent_tr_132_td_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1, \" 0\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ViewCampaignComponent_tr_132_td_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const camp_r10 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", camp_r10.softBounce, \"\");\n  }\n}\n\nfunction ViewCampaignComponent_tr_132_td_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1, \" 0\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ViewCampaignComponent_tr_132_td_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const camp_r10 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", camp_r10.hardBounce, \"\");\n  }\n}\n\nfunction ViewCampaignComponent_tr_132_td_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1, \" 0\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ViewCampaignComponent_tr_132_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, ViewCampaignComponent_tr_132_td_3_Template, 2, 1, \"td\", 31);\n    i0.ɵɵtemplate(4, ViewCampaignComponent_tr_132_td_4_Template, 2, 0, \"td\", 31);\n    i0.ɵɵtemplate(5, ViewCampaignComponent_tr_132_td_5_Template, 2, 1, \"td\", 31);\n    i0.ɵɵtemplate(6, ViewCampaignComponent_tr_132_td_6_Template, 2, 0, \"td\", 31);\n    i0.ɵɵtemplate(7, ViewCampaignComponent_tr_132_td_7_Template, 2, 1, \"td\", 31);\n    i0.ɵɵtemplate(8, ViewCampaignComponent_tr_132_td_8_Template, 2, 0, \"td\", 31);\n    i0.ɵɵtemplate(9, ViewCampaignComponent_tr_132_td_9_Template, 2, 1, \"td\", 31);\n    i0.ɵɵtemplate(10, ViewCampaignComponent_tr_132_td_10_Template, 2, 0, \"td\", 31);\n    i0.ɵɵtemplate(11, ViewCampaignComponent_tr_132_td_11_Template, 2, 1, \"td\", 31);\n    i0.ɵɵtemplate(12, ViewCampaignComponent_tr_132_td_12_Template, 2, 0, \"td\", 31);\n    i0.ɵɵtemplate(13, ViewCampaignComponent_tr_132_td_13_Template, 2, 1, \"td\", 31);\n    i0.ɵɵtemplate(14, ViewCampaignComponent_tr_132_td_14_Template, 2, 0, \"td\", 31);\n    i0.ɵɵtemplate(15, ViewCampaignComponent_tr_132_td_15_Template, 2, 1, \"td\", 31);\n    i0.ɵɵtemplate(16, ViewCampaignComponent_tr_132_td_16_Template, 2, 0, \"td\", 31);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const camp_r10 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(camp_r10.emailAddress);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", camp_r10.delivered != null && camp_r10.delivered != \"\" && camp_r10.delivered != undefined);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", camp_r10.delivered == null || camp_r10.delivered == \"\" || camp_r10.delivered == undefined);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", camp_r10.totalOpen != null && camp_r10.totalOpen != \"\" && camp_r10.totalOpen != undefined);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", camp_r10.totalOpen == null || camp_r10.totalOpen == \"\" || camp_r10.totalOpen == undefined);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", camp_r10.totalClick != null && camp_r10.totalClick != \"\" && camp_r10.totalClick != undefined);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", camp_r10.totalClick == null || camp_r10.totalClick == \"\" || camp_r10.totalClick == undefined);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", camp_r10.unsubscribed != null && camp_r10.unsubscribed != \"\" && camp_r10.unsubscribed != undefined);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", camp_r10.unsubscribed == null || camp_r10.unsubscribed == \"\" || camp_r10.unsubscribed == undefined);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", camp_r10.blacklisted != null && camp_r10.blacklisted != \"\" && camp_r10.blacklisted != undefined);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", camp_r10.blacklisted == null || camp_r10.blacklisted == \"\" || camp_r10.blacklisted == undefined);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", camp_r10.softBounce != null && camp_r10.softBounce != \"\" && camp_r10.delivered != undefined);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", camp_r10.softBounce == null || camp_r10.softBounce == \"\" || camp_r10.delivered == undefined);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", camp_r10.hardBounce != null && camp_r10.hardBounce != \"\" && camp_r10.hardBounce != undefined);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", camp_r10.hardBounce == null || camp_r10.hardBounce == \"\" || camp_r10.hardBounce == undefined);\n  }\n}\n\nfunction ViewCampaignComponent_div_143_p_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 50);\n    i0.ɵɵtext(1, \" Please enter value greater than 0.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ViewCampaignComponent_div_143_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, ViewCampaignComponent_div_143_p_1_Template, 2, 0, \"p\", 49);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n\n    const _r6 = i0.ɵɵreference(142);\n\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r6.errors == null ? null : _r6.errors.pattern);\n  }\n}\n\nconst _c0 = function (a0, a1) {\n  return {\n    itemsPerPage: a0,\n    currentPage: a1\n  };\n};\n\nexport let ViewCampaignComponent = /*#__PURE__*/(() => {\n  class ViewCampaignComponent {\n    constructor(router, emailService, previewService, orderPipe) {\n      this.router = router;\n      this.emailService = emailService;\n      this.previewService = previewService;\n      this.orderPipe = orderPipe;\n      this.campViewTableData = [];\n      this.campViewData = {};\n      this.itrationCount = null;\n      this.order = 'emailAddress';\n      this.reverse = true;\n      this.chkName = '1';\n      this.term = \"\"; //Pagination\n\n      this.p = 1;\n      this.showData = {\n        //rows Per Page\n        rowsPerPage: 10\n      };\n      this.CamptList = {};\n      this.customerClientList = [];\n      this.downloadCustomerData = [];\n      this.commingFrom = sessionStorage.getItem(\"commingFrom\");\n\n      if (this.previewService.ViewCampaignList != null && this.previewService.ViewCampaignList != undefined && this.previewService.ViewCampaignList != \"\") {\n        this.getAllList();\n        this.getCampainView();\n        this.getCampainViewCount();\n      } else if (this.commingFrom == \"Dashboard\") {\n        this.router.navigate(['/dashboard']);\n      } else {\n        this.router.navigate(['/campaign-management']);\n      }\n    }\n\n    ngOnInit() {}\n\n    getCampainView() {\n      this.campViewTableData = [];\n      let startNo = 0;\n      this.itrationCount = 1;\n      let size = 500;\n      let count = Number(this.previewService.ViewCampaignList.mailsentCount);\n      let itration = Math.ceil(count / size);\n\n      for (var i = 0; i < itration; i++) {\n        this.itrationCount++;\n\n        if (i != 0) {\n          startNo = size + startNo;\n        }\n\n        if (this.previewService.historyFlg == \"1\") {\n          let resp = this.emailService.getCampainHistoryView(startNo, size);\n          resp.subscribe(data => {\n            this.itrationCount--;\n\n            if (data != null && data != '') {\n              for (let i in data) {\n                this.campViewTableData.push(data[i]);\n              } // this.campViewTableData = data;\n\n            }\n          });\n        } else {\n          let resp = this.emailService.getCampainView(startNo, size);\n          resp.subscribe(data => {\n            this.itrationCount--;\n\n            if (data != null && data != '') {\n              for (let i in data) {\n                this.campViewTableData.push(data[i]);\n              } // this.campViewTableData = data; \n\n            }\n          });\n        }\n      }\n    }\n\n    getCampainViewCount() {\n      if (this.previewService.historyFlg == \"1\") {\n        let resp = this.emailService.getCampainHistoryViewCount();\n        resp.subscribe(data => {\n          if (data != null && data != '') {\n            this.opencount = data.openCount;\n            this.clickCount = data.clickCount;\n            this.subscribeCount = data.subscribeCount;\n          }\n        });\n      } else {\n        let resp = this.emailService.getCampainViewCount();\n        resp.subscribe(data => {\n          if (data != null && data != '') {\n            this.opencount = data.openCount;\n            this.clickCount = data.clickCount;\n            this.subscribeCount = data.subscribeCount;\n          }\n        });\n      }\n    }\n\n    SetData() {\n      this.campaignData = this.previewService.ViewCampaignList;\n      this.campaignId = this.campaignData.campaign.campaignId;\n      this.campViewData.campaignName = this.campaignData.campaign.campaignName;\n      this.campViewData.campaignStatus = this.campaignData.campaign.campaignStatus;\n      this.campViewData.campaignStartDate = this.campaignData.campaign.campaignStartDate;\n      this.campViewData.subject = this.campaignData.campaign.subject;\n\n      if (this.campaignData.campaign.senderId = this.campaignData.sender.senderId) {\n        this.campViewData.sentfromAddress = this.campaignData.sender.emailAddress;\n      }\n\n      let Listname = \"\";\n\n      for (let i in this.campaignData.campaignListMap) {\n        for (let r in this.ListData) {\n          if (this.ListData[r].listId == this.campaignData.campaignListMap[i].dimList.listId) {\n            Listname = Listname + \",\" + this.campaignData.campaignListMap[i].dimList.listName;\n          }\n        }\n      }\n\n      var myListName = Listname;\n\n      if (myListName.charAt(0) === ',') {\n        myListName = myListName.slice(1);\n        this.campViewData.Listname = myListName;\n      }\n    }\n\n    setDashboarddata() {\n      this.campaignData = this.previewService.ViewCampaignList;\n      this.campaignId = this.campaignData.campaignId;\n      this.campViewData.campaignName = this.campaignData.campaignName;\n      this.campViewData.campaignStatus = this.campaignData.campaignStatus;\n      this.campViewData.campaignStartDate = this.campaignData.campaignStartDate;\n      this.campViewData.subject = this.campaignData.subject;\n      this.campViewData.sentfromAddress = this.campaignData.senderEmailAddress;\n      this.campViewData.Listname = this.campaignData.Listname;\n    }\n\n    getAllList() {\n      let resp = this.emailService.getAllList();\n      resp.subscribe(data => {\n        if (data != null && data != '') {\n          this.ListData = data;\n\n          if (this.commingFrom == \"Dashboard\") {\n            this.setDashboarddata();\n          } else if (this.commingFrom == \"CampmanagementView\") {\n            this.SetData();\n          }\n        }\n      });\n    } // download .csv Report\n\n\n    download() {\n      this.customerClientList = [];\n      this.downloadCustomerData = []; // console.log(this.campViewTableData, \"**\");\n\n      for (let i in this.campViewTableData) {\n        this.customerClientList = this.campViewTableData[i];\n        this.customerClientList.Email_Id = this.campViewTableData[i].emailAddress;\n\n        if (this.campViewTableData[i].delivered != null) {\n          this.customerClientList.Deliver = this.campViewTableData[i].delivered;\n        } else {\n          this.customerClientList.Deliver = \"\";\n        }\n\n        if (this.campViewTableData[i].totalOpen != null) {\n          this.customerClientList.Total_Open = this.campViewTableData[i].totalOpen;\n        } else {\n          this.customerClientList.Total_Open = \"\";\n        }\n\n        if (this.campViewTableData[i].totalClick != null) {\n          this.customerClientList.Total_Click = this.campViewTableData[i].totalClick;\n        } else {\n          this.customerClientList.Total_Click = \"\";\n        }\n\n        if (this.campViewTableData[i].subscribed != null) {\n          this.customerClientList.Subscribe = this.campViewTableData[i].subscribed;\n        } else {\n          this.customerClientList.Subscribe = \"\";\n        }\n\n        if (this.campViewTableData[i].unsubscribed != null) {\n          this.customerClientList.Unsubscribe = this.campViewTableData[i].unsubscribed;\n        } else {\n          this.customerClientList.Unsubscribe = \"\";\n        }\n\n        if (this.campViewTableData[i].blacklisted != null) {\n          this.customerClientList.Blacklist = this.campViewTableData[i].blacklisted;\n        } else {\n          this.customerClientList.Blacklist = \"\";\n        }\n\n        if (this.campViewTableData[i].softBounce != null) {\n          this.customerClientList.Soft_Bounce = this.campViewTableData[i].softBounce;\n        } else {\n          this.customerClientList.Soft_Bounce = \"\";\n        }\n\n        if (this.campViewTableData[i].hardBounce != null) {\n          this.customerClientList.Hard_Bounce = this.campViewTableData[i].hardBounce;\n        } else {\n          this.customerClientList.Hard_Bounce = \"\";\n        }\n\n        if (this.campViewTableData[i].bounceReason != null) {\n          if (this.campViewTableData[i].Deliver === '1') {\n            this.customerClientList.Reason = this.campViewTableData[i].bounceReason;\n          } else {\n            if (this.campViewTableData[i].errorMessage != null && this.campViewTableData[i].errorMessage != undefined) {\n              this.customerClientList.Reason = this.campViewTableData[i].errorMessage.message;\n            } else {\n              this.customerClientList.Reason = this.campViewTableData[i].bounceReason;\n            }\n          }\n        } else {\n          this.customerClientList.Reason = \"\";\n        }\n\n        if (this.campViewTableData[i].tsend != null) {\n          this.customerClientList.Send_Date = moment(this.campViewTableData[i].tsend).format('YYYY-MM-DD h:mma');\n        } else {\n          this.customerClientList.Send_Date = \"\";\n        }\n\n        this.downloadCustomerData.push(this.customerClientList);\n      }\n\n      if (this.downloadCustomerData.length > 0) {\n        this.downloadCSVFile(this.downloadCustomerData, this.campViewData.campaignName);\n      } else {\n        Swal.fire(\"This campaign is empty\");\n      }\n    }\n\n    downloadCSVFile(data, filename = 'data') {\n      let csvData = this.ConvertToCSV(data, ['Email_Id', 'Deliver', 'Total_Open', 'Total_Click', 'Subscribe', 'Unsubscribe', 'Blacklist', 'Soft_Bounce', 'Hard_Bounce', 'Reason', 'Send_Date']); //console.log(csvData)\n\n      let blob = new Blob(['\\ufeff' + csvData], {\n        type: 'text/csv;charset=utf-8;'\n      });\n      let dwldLink = document.createElement(\"a\");\n      let url = URL.createObjectURL(blob);\n      let isSafariBrowser = navigator.userAgent.indexOf('Safari') != -1 && navigator.userAgent.indexOf('Chrome') == -1;\n\n      if (isSafariBrowser) {\n        //if Safari open in new window to save file with random filename.\n        dwldLink.setAttribute(\"target\", \"_blank\");\n      }\n\n      dwldLink.setAttribute(\"href\", url);\n      dwldLink.setAttribute(\"download\", filename + \".csv\");\n      dwldLink.style.visibility = \"hidden\";\n      document.body.appendChild(dwldLink);\n      dwldLink.click();\n      document.body.removeChild(dwldLink);\n    }\n\n    ConvertToCSV(objArray, headerList) {\n      let array = typeof objArray != 'object' ? JSON.parse(objArray) : objArray;\n      let str = '';\n      let row = 'S.No,';\n\n      for (let index in headerList) {\n        row += headerList[index] + ',';\n      }\n\n      row = row.slice(0, -1);\n      str += row + '\\r\\n';\n\n      for (let i = 0; i < array.length; i++) {\n        let line = i + 1 + '';\n\n        for (let index in headerList) {\n          let head = headerList[index];\n          line += ',' + array[i][head];\n        }\n\n        str += line + '\\r\\n';\n      }\n\n      return str;\n    }\n\n    setOrder(value) {\n      if (this.order === value) {\n        this.reverse = !this.reverse;\n      }\n\n      this.order = value;\n    }\n\n  }\n\n  ViewCampaignComponent.ɵfac = function ViewCampaignComponent_Factory(t) {\n    return new (t || ViewCampaignComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.EmailManaementService), i0.ɵɵdirectiveInject(i3.PreviewService), i0.ɵɵdirectiveInject(i4.OrderPipe));\n  };\n\n  ViewCampaignComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ViewCampaignComponent,\n    selectors: [[\"app-view-campaign\"]],\n    decls: 147,\n    vars: 62,\n    consts: [[1, \"row\"], [1, \"col-md-12\"], [1, \"card\", \"mb-2\", \"font-20\"], [1, \"card-header\"], [1, \"row\", \"mt-4\"], [1, \"col-md-4\", \"mt-4\"], [1, \"box-shadow\", \"p-4\", \"border\"], [1, \"font-20\", \"text-center\", \"mt-1\"], [1, \"row\", \"mt-3\"], [1, \"col-lg-4\"], [1, \"mt-2\"], [1, \"col-lg-8\"], [\"class\", \"mt-2\", 4, \"ngIf\"], [1, \"col-md-2\", \"mt-4\"], [1, \"text-center\", \"text-light\", \"bg-secondary\", \"p-4\", \"font-20\", \"box-shadow\"], [1, \"bg-warning\", \"text-light\", \"text-center\", \"p-4\", \"font-20\", \"box-shadow\"], [1, \"bg-danger\", \"text-light\", \"text-center\", \"p-4\", \"font-20\", \"box-shadow\"], [1, \"text-center\", \"p-3\", \"font-20\", \"box-shadow\", 2, \"background-color\", \"white\"], [\"class\", \"spinner-border\", \"style\", \"height:30px;width:30px;\", 4, \"ngIf\"], [\"class\", \"text-center font-20 p-2 text-primary link \", 3, \"click\", 4, \"ngIf\"], [1, \"col-md-12\", \"bg-light\"], [1, \"mb-2\", \"font-20\"], [1, \"col-sm-7\", \"col-xl-8\"], [1, \"col-sm-5\", \"col-xl-4\", \"pull-left\"], [1, \"search-button\", \"float-right\", \"mt-2\", \"w-100\"], [\"type\", \"text\", \"name\", \"search\", \"placeholder\", \"\\uF002 Search\", 1, \"form-control\", 2, \"font-family\", \"Arial, FontAwesome\", 3, \"ngModel\", \"ngModelChange\"], [1, \"table-responsive\", \"mt-4\"], [1, \"table\", \"table-hover\", \"table-bordered\", \"mt-2\", \"tacho-table\"], [1, \"bg-dark\", \"thead\"], [1, \"th\", 3, \"click\"], [1, \"pl-1\", \"span\", 3, \"hidden\"], [4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [1, \"row\", \"mt-2\", \"col-xs-2\"], [1, \"col-md-4\", \"mt-2\"], [1, \"show-rows\"], [\"type\", \"number\", \"min\", \"1\", \"name\", \"rowsPerPage\", \"pattern\", \"^[1-9][0-9]*$\", \"placeholder\", \"Rows\", 1, \"rowsPerPage\", \"ml-2\", 3, \"ngModel\", \"ngModelChange\"], [\"rowsPerPage\", \"ngModel\"], [1, \"col-md-8\"], [1, \"float-right\", \"mt-2\"], [3, \"pageChange\"], [1, \"spinner-border\", 2, \"height\", \"30px\", \"width\", \"30px\"], [1, \"text-center\", \"font-20\", \"p-2\", \"text-primary\", \"link\", 3, \"click\"], [\"aria-hidden\", \"true\", 1, \"fa\", \"fa-download\"], [1, \"noBorder\"], [1, \"text-danger\"], [1, \"d-flex\", \"justify-content-center\", \"text-danger\"], [\"role\", \"status\", 1, \"spinner-border\"], [1, \"sr-only\"], [\"class\", \"help-bpx\", \"class\", \"help-bpx\", \"style\", \"color: red;\", 4, \"ngIf\"], [1, \"help-bpx\", 2, \"color\", \"red\"]],\n    template: function ViewCampaignComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"strong\");\n        i0.ɵɵtext(5, \"View Campaign Details\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(6, \"div\", 4)(7, \"div\", 5)(8, \"div\", 6)(9, \"div\", 7)(10, \"strong\");\n        i0.ɵɵtext(11);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(12, \"div\", 8)(13, \"div\", 9)(14, \"div\", 10)(15, \"strong\");\n        i0.ɵɵtext(16, \"Subject\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(17, \"div\", 10)(18, \"strong\");\n        i0.ɵɵtext(19, \"Sent From\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(20, \"div\", 10)(21, \"strong\");\n        i0.ɵɵtext(22, \"List Name\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(23, \"div\", 10)(24, \"strong\");\n        i0.ɵɵtext(25, \"Sent Date\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(26, \"div\", 10)(27, \"strong\");\n        i0.ɵɵtext(28, \"Status\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(29, \"div\", 11)(30, \"div\", 10);\n        i0.ɵɵtext(31);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"div\", 10);\n        i0.ɵɵtext(33);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"div\", 10);\n        i0.ɵɵtext(35);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(36, ViewCampaignComponent_div_36_Template, 3, 4, \"div\", 12);\n        i0.ɵɵtemplate(37, ViewCampaignComponent_div_37_Template, 2, 0, \"div\", 12);\n        i0.ɵɵelementStart(38, \"div\", 10);\n        i0.ɵɵtext(39);\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(40, \"div\", 13)(41, \"div\", 14)(42, \"strong\");\n        i0.ɵɵtext(43);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(44, \"br\");\n        i0.ɵɵelementStart(45, \"strong\");\n        i0.ɵɵtext(46, \"Open\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(47, \"div\", 13)(48, \"div\", 15)(49, \"strong\");\n        i0.ɵɵtext(50);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(51, \"br\");\n        i0.ɵɵelementStart(52, \"strong\");\n        i0.ɵɵtext(53, \"Click\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(54, \"div\", 13)(55, \"div\", 16)(56, \"strong\");\n        i0.ɵɵtext(57);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(58, \"br\");\n        i0.ɵɵelementStart(59, \"strong\");\n        i0.ɵɵtext(60, \"Unsubscribe\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(61, \"div\", 13)(62, \"div\", 17)(63, \"span\")(64, \"strong\");\n        i0.ɵɵtext(65, \"Download Report\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(66, ViewCampaignComponent_span_66_Template, 1, 0, \"span\", 18);\n        i0.ɵɵtemplate(67, ViewCampaignComponent_div_67_Template, 2, 0, \"div\", 19);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(68, \"br\")(69, \"br\");\n        i0.ɵɵelementStart(70, \"div\", 4)(71, \"div\", 20)(72, \"div\", 21);\n        i0.ɵɵelement(73, \"strong\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(74, \"div\", 22);\n        i0.ɵɵelementStart(75, \"div\", 23)(76, \"div\", 24)(77, \"input\", 25);\n        i0.ɵɵlistener(\"ngModelChange\", function ViewCampaignComponent_Template_input_ngModelChange_77_listener($event) {\n          return ctx.search = $event;\n        });\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(78, \"div\", 26)(79, \"table\", 27)(80, \"thead\", 28)(81, \"tr\")(82, \"th\", 29);\n        i0.ɵɵlistener(\"click\", function ViewCampaignComponent_Template_th_click_82_listener() {\n          return ctx.setOrder(\"emailAddress\");\n        });\n        i0.ɵɵtext(83, \"Email Address\");\n        i0.ɵɵelementStart(84, \"span\", 30);\n        i0.ɵɵtext(85, \"\\u25BC\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(86, \"span\", 30);\n        i0.ɵɵtext(87, \"\\u25B2\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(88, \"th\", 29);\n        i0.ɵɵlistener(\"click\", function ViewCampaignComponent_Template_th_click_88_listener() {\n          return ctx.setOrder(\"delivered\");\n        });\n        i0.ɵɵtext(89, \"Deliver\");\n        i0.ɵɵelementStart(90, \"span\", 30);\n        i0.ɵɵtext(91, \"\\u25BC\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(92, \"span\", 30);\n        i0.ɵɵtext(93, \"\\u25B2\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(94, \"th\", 29);\n        i0.ɵɵlistener(\"click\", function ViewCampaignComponent_Template_th_click_94_listener() {\n          return ctx.setOrder(\"totalOpen\");\n        });\n        i0.ɵɵtext(95, \"Open\");\n        i0.ɵɵelementStart(96, \"span\", 30);\n        i0.ɵɵtext(97, \"\\u25BC\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(98, \"span\", 30);\n        i0.ɵɵtext(99, \"\\u25B2\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(100, \"th\", 29);\n        i0.ɵɵlistener(\"click\", function ViewCampaignComponent_Template_th_click_100_listener() {\n          return ctx.setOrder(\"totalClick\");\n        });\n        i0.ɵɵtext(101, \"Click\");\n        i0.ɵɵelementStart(102, \"span\", 30);\n        i0.ɵɵtext(103, \"\\u25BC\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(104, \"span\", 30);\n        i0.ɵɵtext(105, \"\\u25B2\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(106, \"th\", 29);\n        i0.ɵɵlistener(\"click\", function ViewCampaignComponent_Template_th_click_106_listener() {\n          return ctx.setOrder(\"unsubscribed\");\n        });\n        i0.ɵɵtext(107, \"Unsubscribe\");\n        i0.ɵɵelementStart(108, \"span\", 30);\n        i0.ɵɵtext(109, \"\\u25BC\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(110, \"span\", 30);\n        i0.ɵɵtext(111, \"\\u25B2\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(112, \"th\", 29);\n        i0.ɵɵlistener(\"click\", function ViewCampaignComponent_Template_th_click_112_listener() {\n          return ctx.setOrder(\"blacklisted\");\n        });\n        i0.ɵɵtext(113, \"Blacklist\");\n        i0.ɵɵelementStart(114, \"span\", 30);\n        i0.ɵɵtext(115, \"\\u25BC\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(116, \"span\", 30);\n        i0.ɵɵtext(117, \"\\u25B2\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(118, \"th\", 29);\n        i0.ɵɵlistener(\"click\", function ViewCampaignComponent_Template_th_click_118_listener() {\n          return ctx.setOrder(\"softBounce\");\n        });\n        i0.ɵɵtext(119, \"Soft Bounce\");\n        i0.ɵɵelementStart(120, \"span\", 30);\n        i0.ɵɵtext(121, \"\\u25BC\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(122, \"span\", 30);\n        i0.ɵɵtext(123, \"\\u25B2\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(124, \"th\", 29);\n        i0.ɵɵlistener(\"click\", function ViewCampaignComponent_Template_th_click_124_listener() {\n          return ctx.setOrder(\"hardBounce\");\n        });\n        i0.ɵɵtext(125, \"Hard Bounce\");\n        i0.ɵɵelementStart(126, \"span\", 30);\n        i0.ɵɵtext(127, \"\\u25BC\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(128, \"span\", 30);\n        i0.ɵɵtext(129, \"\\u25B2\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(130, \"tbody\");\n        i0.ɵɵtemplate(131, ViewCampaignComponent_tr_131_Template, 18, 0, \"tr\", 31);\n        i0.ɵɵtemplate(132, ViewCampaignComponent_tr_132_Template, 17, 15, \"tr\", 32);\n        i0.ɵɵpipe(133, \"paginate\");\n        i0.ɵɵpipe(134, \"filter\");\n        i0.ɵɵpipe(135, \"orderBy\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(136, \"div\", 33)(137, \"div\", 34)(138, \"div\", 35)(139, \"span\");\n        i0.ɵɵtext(140, \"Show Records\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(141, \"input\", 36, 37);\n        i0.ɵɵlistener(\"ngModelChange\", function ViewCampaignComponent_Template_input_ngModelChange_141_listener($event) {\n          return ctx.showData.rowsPerPage = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(143, ViewCampaignComponent_div_143_Template, 2, 1, \"div\", 31);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(144, \"div\", 38)(145, \"div\", 39)(146, \"pagination-controls\", 40);\n        i0.ɵɵlistener(\"pageChange\", function ViewCampaignComponent_Template_pagination_controls_pageChange_146_listener($event) {\n          return ctx.p = $event;\n        });\n        i0.ɵɵelementEnd()()()();\n      }\n\n      if (rf & 2) {\n        const _r6 = i0.ɵɵreference(142);\n\n        i0.ɵɵadvance(11);\n        i0.ɵɵtextInterpolate(ctx.campViewData.campaignName);\n        i0.ɵɵadvance(20);\n        i0.ɵɵtextInterpolate(ctx.campViewData.subject);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.campViewData.sentfromAddress);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.campViewData.Listname);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.campViewData.campaignStartDate != null || ctx.campViewData.campaignStartDate != \"\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.campViewData.campaignStartDate == null || ctx.campViewData.campaignStartDate == \"\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.campViewData.campaignStatus);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(ctx.opencount);\n        i0.ɵɵadvance(7);\n        i0.ɵɵtextInterpolate(ctx.clickCount);\n        i0.ɵɵadvance(7);\n        i0.ɵɵtextInterpolate(ctx.subscribeCount);\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngIf\", ctx.itrationCount != 1 && ctx.itrationCount != undefined && ctx.itrationCount != null);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.itrationCount == 1 || ctx.itrationCount == undefined || ctx.itrationCount == null);\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngModel\", ctx.search);\n        i0.ɵɵadvance(5);\n        i0.ɵɵclassProp(\"active\", ctx.order === \"emailAddress\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", ctx.reverse);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", !ctx.reverse);\n        i0.ɵɵadvance(2);\n        i0.ɵɵclassProp(\"active\", ctx.order === \"delivered\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", ctx.reverse);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", !ctx.reverse);\n        i0.ɵɵadvance(2);\n        i0.ɵɵclassProp(\"active\", ctx.order === \"totalOpen\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", ctx.reverse);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", !ctx.reverse);\n        i0.ɵɵadvance(2);\n        i0.ɵɵclassProp(\"active\", ctx.order === \"totalClick\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", ctx.reverse);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", !ctx.reverse);\n        i0.ɵɵadvance(2);\n        i0.ɵɵclassProp(\"active\", ctx.order === \"unsubscribed\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", ctx.reverse);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", !ctx.reverse);\n        i0.ɵɵadvance(2);\n        i0.ɵɵclassProp(\"active\", ctx.order === \"blacklisted\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", ctx.reverse);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", !ctx.reverse);\n        i0.ɵɵadvance(2);\n        i0.ɵɵclassProp(\"active\", ctx.order === \"softBounce\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", ctx.reverse);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", !ctx.reverse);\n        i0.ɵɵadvance(2);\n        i0.ɵɵclassProp(\"active\", ctx.order === \"hardBounce\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", ctx.reverse);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"hidden\", !ctx.reverse);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.campViewTableData == null || ctx.campViewTableData.length == 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind2(133, 49, i0.ɵɵpipeBind2(134, 52, i0.ɵɵpipeBind3(135, 55, ctx.campViewTableData, ctx.order, ctx.reverse), ctx.search), i0.ɵɵpureFunction2(59, _c0, ctx.showData.rowsPerPage, ctx.p)));\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngModel\", ctx.showData.rowsPerPage);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", _r6.invalid || _r6.touched);\n      }\n    },\n    directives: [i5.NgIf, i6.DefaultValueAccessor, i6.NgControlStatus, i6.NgModel, i5.NgForOf, i6.MinValidator, i6.NumberValueAccessor, i6.PatternValidator, i7.PaginationControlsComponent],\n    pipes: [i5.DatePipe, i7.PaginatePipe, i8.Ng2SearchPipe, i4.OrderPipe],\n    styles: [\".noBorder[_ngcontent-%COMP%]{border:0}.thead[_ngcontent-%COMP%]   .th[_ngcontent-%COMP%]{cursor:pointer;margin-right:15px;margin-left:15px}.thead[_ngcontent-%COMP%]   .th[_ngcontent-%COMP%]   .span[_ngcontent-%COMP%]{visibility:hidden}.thead[_ngcontent-%COMP%]   .th.active[_ngcontent-%COMP%]{color:#000}.thead[_ngcontent-%COMP%]   .th.active[_ngcontent-%COMP%]   .span[_ngcontent-%COMP%]{visibility:visible}\"]\n  });\n  return ViewCampaignComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}