<div class="header">
    <div class="tabWrapper">
        <ul>
            <li class="tabHead active" [routerLink]="['./useful-contacts']" routerLinkActive="active">
                <a class="tab-item" id="usefulContacts" attr.aria-label="tab Month">Useful Contacts</a>
            </li>
        </ul>
    </div>
</div>
<mat-card>
    <mat-card-header>
        <span> Useful Contacts </span>
        <span class="spacer"></span>
        <span>
            <button  *ngIf="isAuthorized(77,1)" id="edit_view_button" mat-stroked-button color="primary" [routerLink]="['./contacts']"  queryParamsHandling="preserve">Add</button>          
        </span>
        <span>
            <button id="edit_view_button" mat-stroked-button color="primary" (click)="onExitClicked()" >Exit</button>
        </span>
    </mat-card-header>

    <mat-card-content class="userful_contact">
        <div *ngIf ="!usefulcontacts">
        <p> There are currently no added contacts</p>
    </div>
    <div *ngIf ="usefulcontacts">
        <mat-table id="useful_contacts_table" #table [dataSource]="dataSource" matSort>

            <ng-container matColumnDef="dateAdded">
                <mat-header-cell *matHeaderCellDef id="dateAdded_button" mat-sort-header>
                    Date added
                </mat-header-cell>
                <mat-cell *matCellDef="let element">
                    {{ element.createdDate | customMonthFormat}}
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="workerName">
                <mat-header-cell *matHeaderCellDef id="workerName_button" mat-sort-header>
                    Worker name
                </mat-header-cell>
                <mat-cell *matCellDef="let element">
                    {{ element.workerName }}
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="organisation">
                <mat-header-cell *matHeaderCellDef id="organization_button" mat-sort-header>
                    Organisation
                </mat-header-cell>
                <mat-cell *matCellDef="let element">
                    {{ element.organisation }}
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="telePhone">
                <mat-header-cell *matHeaderCellDef id="telePhone_button" >
                    Telephone number
                </mat-header-cell>
                <mat-cell *matCellDef="let element">
                    {{ element.telephoneNumber }}
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="emailAddress">
                <mat-header-cell *matHeaderCellDef id="emailAddress_button" >
                    Email address
                </mat-header-cell>
                <mat-cell *matCellDef="let element">
                    {{ element.email }}
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="address">
                <mat-header-cell *matHeaderCellDef id="address_button" >
                    Address
                </mat-header-cell>
                <mat-cell *matCellDef="let element">
                    {{ element.address }}
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="notes">
                <mat-header-cell *matHeaderCellDef id="notes_button" >
                    Notes
                </mat-header-cell>
                <mat-cell *matCellDef="let element"matTooltip="{{element.notes}}">
                    {{ element.notes  | truncate:[25, '...']}}
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="actions">
                <mat-header-cell class="actions-column" *matHeaderCellDef>Actions</mat-header-cell>
                <mat-cell class="matMenus actions-column" *matCellDef="let element">

                    <button *ngIf="isAuthorized(77,2)" id="view_user_button_{{element.id}}" mat-icon-button color="primary"
                        [routerLink]="['./view' + '/' + element.id]" queryParamsHandling="preserve" matTooltip="View" [matTooltipShowDelay]="800">
                          

                        <mat-icon>visibility</mat-icon>
                    </button>

                    <button  *ngIf="isAuthorized(77,3)" id="edit_user_button_{{element.id}}" mat-icon-button color="primary"
                        [routerLink]="['./contacts' + '/' + element.id]"   queryParamsHandling="preserve"  matTooltip="Edit" [matTooltipShowDelay]="800">
                        <mat-icon>create</mat-icon>
                    </button>

                    <button  *ngIf="isAuthorized(77,4)" id="delete_user_button" mat-icon-button 
                        matTooltip="Delete" [matTooltipShowDelay]="800" (click)="onDelete(element.id)">
                        <mat-icon color="accent">delete</mat-icon>
                    </button>                         

                </mat-cell>
            </ng-container>
            <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
            <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>


        </mat-table>
    </div>
        <mat-paginator id="user_pagination" [pageSize]="pageSize" [showFirstLastButtons]='true' [hidePageSize]="true">
        </mat-paginator>
    </mat-card-content>


</mat-card>