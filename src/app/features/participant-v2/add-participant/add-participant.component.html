<mat-card>
  <mat-card-header>
    <span *ngIf="!isNew">
      <app-stepper-navigation></app-stepper-navigation>
    </span>
    <span class="spacer"></span>
    <div>
      <span class="action-buttons">
        <button id="exit_user_button" mat-stroked-button color="primary"
          [routerLink]="['/person-supported']">Exit</button>
      </span>
    </div>
  </mat-card-header>
  <form [formGroup]="personSupportedForm" (ngSubmit)="onSubmit()" validate autocomplete="off">

    <div class="label-hr"> <span> Person Supported details </span> </div>
    <div formGroupName="participantV2Details">
      <div class="card-row">
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label for="firstName">First name</mat-label>
            <input matInput placeholder="First Name" formControlName="firstName" id="firstName" required>
            <mat-hint>Maximum 100 characters are allowed</mat-hint>
            <mat-error *ngIf="personSupportedForm.get('participantV2Details').get('firstName').hasError('pattern')">
              Invalid first name</mat-error>
            <mat-error *ngIf="personSupportedForm.get('participantV2Details').get('firstName').hasError('required')">
              First name is required</mat-error>
            <mat-error *ngIf="personSupportedForm.get('participantV2Details').get('firstName').hasError('maxlength')">
              First name should be 100 characters or less
            </mat-error>
          </mat-form-field>
        </div>
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label for="lastName">Family/Surname</mat-label>
            <input matInput placeholder="Family/Surname" formControlName="lastName" id="lastName" required>
            <mat-hint>Maximum 100 characters are allowed</mat-hint>
            <mat-error *ngIf="personSupportedForm.get('participantV2Details').get('lastName').hasError('required')">
              Family/Surname is required</mat-error>
            <mat-error *ngIf="personSupportedForm.get('participantV2Details').get('lastName').hasError('pattern')">
              Invalid Family/Surname Name</mat-error>
            <mat-error *ngIf="personSupportedForm.get('participantV2Details').get('lastName').hasError('maxlength')">
              Family/Surname should be 100
              characters or less
            </mat-error>
          </mat-form-field>
        </div>
      </div>
      <div class="card-row">
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label for="dateOfBirth">Date of birth (DOB)</mat-label>
            <input matInput [matDatepicker]="dateOfBirthPicker" [max]="maxDateOfBirth" [min]="minDateOfBirth"
              formControlName="dateOfBirth" placeholder="Date of Birth (minimum age is 16)" id="dateOfBirth" required>
            <mat-datepicker-toggle matSuffix [for]="dateOfBirthPicker"></mat-datepicker-toggle>
            <mat-datepicker #dateOfBirthPicker></mat-datepicker>
            <mat-error
              *ngIf="personSupportedForm.get('participantV2Details').get('dateOfBirth').getError('matDatepickerMax')
                                  && !personSupportedForm.get('participantV2Details').get('dateOfBirth').getError('matDatepickerParse')
                                  && !personSupportedForm.get('participantV2Details').get('dateOfBirth').getError('required')">
              Invalid date of birth.
              Participant must be 16 years or older </mat-error>
            <mat-error
              *ngIf="personSupportedForm.get('participantV2Details').get('dateOfBirth').getError('matDatepickerMin')
                                  && !personSupportedForm.get('participantV2Details').get('dateOfBirth').getError('matDatepickerParse')
                                  && !personSupportedForm.get('participantV2Details').get('dateOfBirth').getError('required')">
              Invalid date of birth.
              Participant must be less than 100 years </mat-error>
            <mat-error
              *ngIf="!personSupportedForm.get('participantV2Details').get('dateOfBirth').getError('matDatepickerMax')
                                    && !personSupportedForm.get('participantV2Details').get('dateOfBirth').getError('matDatepickerParse')
                                    && personSupportedForm.get('participantV2Details').get('dateOfBirth').getError('required')">
              Date of birth (DOB) is
              required
            </mat-error>
            <mat-error
              *ngIf="personSupportedForm.get('participantV2Details').get('dateOfBirth').errors?.matDatepickerParse">
              Invalid
              date
            </mat-error>
          </mat-form-field>
        </div>
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label for="niNumber">National insurance number</mat-label>
            <input matInput formControlName="niNumber" id="niNumber" placeholder="National Insurance Number" required>
            <mat-hint align="start">example: AA 12 34 56 B</mat-hint>
            <mat-error *ngIf="personSupportedForm.get('participantV2Details').get('niNumber').hasError('required')">
              National insurance number is required</mat-error>
            <mat-error *ngIf="personSupportedForm.get('participantV2Details').get('niNumber').hasError('pattern')">
              Invalid
              NI Number</mat-error>
          </mat-form-field>
        </div>
      </div>
      <div class="card-row">
        
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label for="joinedDate">The date you joined Unity Works</mat-label>
            <input matInput [matDatepicker]="joinedDate" [max]="maxDateOFJoinedUnityWork" [min]="minDateOFJoinedUnityWork"
              formControlName="joinedDate" placeholder="The date you joined Unity Works"
              id="joinedDate" required>
            <mat-datepicker-toggle matSuffix [for]="joinedDate"></mat-datepicker-toggle>
            <mat-datepicker #joinedDate></mat-datepicker>
            <mat-error
            *ngIf="!personSupportedForm.get('participantV2Details').get('joinedDate').getError('matDatepickerMax')
                                  && !personSupportedForm.get('participantV2Details').get('joinedDate').getError('matDatepickerParse')
                                  && personSupportedForm.get('participantV2Details').get('joinedDate').getError('required')">
                                  The date you joined Unity Works is required
          </mat-error>
          <mat-error
            *ngIf="personSupportedForm.get('participantV2Details').get('joinedDate').errors?.matDatepickerParse">
            Invalid
            date
          </mat-error>
          <mat-error
          *ngIf="personSupportedForm.get('participantV2Details').get('joinedDate').getError('matDatepickerMax')
                              && !personSupportedForm.get('participantV2Details').get('joinedDate').getError('matDatepickerParse')
                              && !personSupportedForm.get('participantV2Details').get('joinedDate').getError('required')">
                              Invalid joining date. Date cannot be in future  </mat-error>
          </mat-form-field>
        
        </div>
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label>Your key staff member phone number?</mat-label>
            <input matInput formControlName="keyMemberStaffPhoneNumber" id="keyMemberStaffPhoneNumber"
              placeholder="Your key staff member phone number?">
            <mat-error
              *ngIf="personSupportedForm.get('participantV2Details').get('keyMemberStaffPhoneNumber').hasError('pattern')">
              Worker telephone number is Invalid
            </mat-error>
          </mat-form-field>
        </div>
      </div>
     
      <div class="card-row">
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label>
              Are you a British National?
            </mat-label>
            <mat-select placeholder="Are you a British National?" formControlName="britishNational">
              <mat-option *ngFor="let item of refAnswer" [value]="item?.id" id="item">{{item.answerName}}</mat-option>
              <mat-option [value]="null" id="britishNational-null"> Clear Selection </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label>
              Have you been a resident of UK or EEA for the last 3 years?
            </mat-label>
            <mat-select placeholder="Have you been a resident of UK or EEA for the last 3 years?"
              formControlName="residentUKEEAlast3yrs">
              <mat-option *ngFor="let item of refAnswer" [value]="item?.id" id="item">{{item.answerName}}</mat-option>
              <mat-option [value]="null" id="residentUKEEAlast3yrs-null"> Clear Selection </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>
      <div class="card-row">
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label>
             Who is your key member of staff?
            </mat-label>
            <mat-select placeholder="Who is your key member of staff? " formControlName="workerId" required >
              <mat-option *ngFor="let item of userList" [value]="item?.id" id="item">{{item.userFullName}}</mat-option>
              <mat-option [value]="null" id="workerId-null"> Clear Selection </mat-option>
            </mat-select>
            <mat-error *ngIf="personSupportedForm.get('participantV2Details').get('workerId').hasError('required')">Key member of staff is required
            </mat-error>
          </mat-form-field>
        </div>
        <div class="card-column">
          <mat-hint>Countries in EEA: Austria, Belgium, Bulgaria, Croatia, Republic of Cyprus, Czech Republic,
            Denmark,
            Estonia, Finland, France, Germany, Greece, Hungary, Ireland, Italy, Latvia, Lithuania, Luxembourg, Malta,
            Netherlands, Poland, Portugal, Romania, Slovakia, Slovenia, Spain and Sweden.</mat-hint>
        </div>
      </div>
      <div class="card-row">
        <!-- <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label>
              What is your primary programme?
            </mat-label>
            <mat-select placeholder="What is your primary programme?" formControlName="programId"  (selectionChange)="onSelection1($event)">
              <mat-option *ngFor="let item of primaryProgramsList" [value]="item?.id" id="item">{{item.value}}</mat-option>
              <mat-option [value]="null" id="programId"> Clear Selection </mat-option>
            </mat-select>
          </mat-form-field>
        </div> -->

        <!-- <div class="card-column">
          <mat-form-field appearance="fill" [ngClass]="{'error-message': jobCheck}">
            <mat-label>
              Are you on any additional programmes?
            </mat-label>
            <mat-select id="additionalProgramsList" placeholder="Are you on any additional programmes?" formControlName="additionalProgramsList" multiple (selectionChange)="onSelection2($event)">
              <mat-option *ngFor="let item of refData?.programs" [value]="item?.id" id="item.id">{{item.value}}</mat-option>
            </mat-select>
            <mat-hint style="color:#f44336" *ngIf="jobCheck"> 
            Primary programme is already selected. Please unselect additional programmes
        </mat-hint>
          </mat-form-field>
        </div> -->
      </div>

      <div class="card-row">
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label>
              Borough of residence
            </mat-label>
              <input matInput placeholder="Borough of residence" formControlName="boroughId" id="employerList_Id" [matAutocomplete]="auto">
              <mat-autocomplete #auto="matAutocomplete">
                <mat-option *ngFor="let option of filteredboroughsList | async " (onSelectionChange)="onOptionSelectd(option)" [value]="option.value"
                  id="employerId_{{option.value}}">
                  {{option.value}}
                </mat-option>

              </mat-autocomplete>
          </mat-form-field>
      </div>
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label>Thera Group number</mat-label>
            <input matInput placeholder="Thera Group number" formControlName="theraGroupNumber" id="theraGroupNumber">
            <mat-hint>TG number is TG followed by 6 digits. Speak to Information Systems to get the number.</mat-hint>
            <mat-error *ngIf="personSupportedForm.get('participantV2Details').get('theraGroupNumber').hasError('maxlength')">
              Thera group number should be 50 characters or less
            </mat-error>
            <mat-error *ngIf="personSupportedForm.get('participantV2Details').get('theraGroupNumber').hasError('pattern')">
              Invalid thera group number 
            </mat-error>
          </mat-form-field>
        </div>
      </div>
      <div class="card-row">
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label>What benefits do you receive?</mat-label>
            <textarea matInput autosize [minRows]="1" placeholder="What benefits do you receive?" formControlName="benefitsReceived" id="benefitsReceived"></textarea>
            <mat-hint>Maximum 300 characters are allowed</mat-hint>
            <mat-error *ngIf="personSupportedForm.get('participantV2Details').get('benefitsReceived').hasError('maxlength')">
              What benefits do you receive should be 300 characters or less
            </mat-error>
          </mat-form-field>
        </div>
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label>
              Have you seen the person-supported right-to-work documents?
            </mat-label>
            <mat-select placeholder="Have you seen the person-supported right-to-work documents?" formControlName="britishNational">
              <mat-option *ngFor="let item of refAnswer" [value]="item?.id" id="item">{{item.answerName}}</mat-option>
              <mat-option [value]="null" id="britishNational-null"> Clear Selection </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>
      
      <div class="card-row">
        <div class="card-column">
          <mat-form-field appearance="fill" [ngClass]="{'error-message': jobCheck1}">
            <mat-label>What person type is the person supported?</mat-label>
            <mat-select placeholder="What person type is the person supported" formControlName="personTypes" multiple (selectionChange)="onPersonTypeDataChange($event)">
              <mat-option *ngFor="let item of personTypeData" [value]="item.id">{{ item.name }}</mat-option>
            </mat-select>
            <mat-error *ngIf="personSupportedForm.get('participantV2Details').get('personTypes').hasError('required')">
              Person type is required
            </mat-error>
          </mat-form-field> 
        </div>
        <div class="card-column">
          <mat-form-field appearance="fill" [ngClass]="{'error-message': jobCheck2}">
            <mat-label>What is the supported persons programme?</mat-label>
            <mat-select placeholder="What is the supported persons programme" formControlName="progmmeIds" multiple (selectionChange)="onSupportedProgramChange($event)">
              <mat-option *ngFor="let item of supportedProgramData" [value]="item?.id">{{ item.name }}</mat-option>
            </mat-select>
            <mat-error *ngIf="personSupportedForm.get('participantV2Details').get('progmmeIds').hasError('required')">
              Supported persons programme is required
            </mat-error>
            <mat-hint style="color:#f44336"  *ngIf="jobCheck">
               {{persontyese}} person type programme is required
            </mat-hint>
          </mat-form-field>
               
        </div>
      </div>
      <div class="card-row">
        <div class="card-column">
          <mat-form-field appearance="fill" [ngClass]="{'error-message': jobCheck3}">
            <mat-label>On which contracts or social enterprises is the person supported?</mat-label>
            <mat-select placeholder="On which contracts or social enterprises is the person supported" formControlName="contracts" multiple (selectionChange)="onContractsSelected($event)">
              <mat-option *ngFor="let item of socialEnterpriseData" [value]="item.id">{{item.name}}</mat-option>
            </mat-select>
            <mat-error *ngIf="personSupportedForm.get('participantV2Details').get('contracts').hasError('required')">
              Contracts or social enterprises are required
            </mat-error>
            <mat-hint style="color:#f44336"  *ngIf="contractsCheck">
              {{contracts}}  contracts is required
           </mat-hint>
          </mat-form-field>  
        </div>
      </div>
      
      <div class="card-row">
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label>
              Ethnicity
            </mat-label>
            <mat-select placeholder="Ethnicity" formControlName="ethnicityId">
              <mat-option *ngFor="let item of refData?.ethnicities" [value]="item?.id" id="item" >{{item.value}}</mat-option>
              <mat-option [value]="null" id="ethnicityId"> Clear Selection </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="card-column" *ngIf="onEthnicityOtherSelected('participantV2Details','ethnicityId')">
          <mat-form-field appearance="fill">
            <mat-label>Other Ethnicity</mat-label>
            <input matInput placeholder="Other Ethnicity" formControlName="otherEthnicity" id="otherEthnicity" required >
            <mat-hint>Maximum 100 characters are allowed</mat-hint>
            <mat-error *ngIf="personSupportedForm.get('participantV2Details').get('otherEthnicity').hasError('required')">
              Other Ethnicity is required</mat-error>
            <mat-error *ngIf="personSupportedForm.get('participantV2Details').get('otherEthnicity').hasError('pattern')">
              Invalid Other Ethnicity</mat-error>
            <mat-error *ngIf="personSupportedForm.get('participantV2Details').get('otherEthnicity').hasError('maxlength')">
              Other Ethnicity should be 100
              characters or less
            </mat-error>
          </mat-form-field>
        </div>
      </div>

      <div class="card-row">
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label>What is your preferred pronoun?</mat-label>
            <mat-select placeholder="What is your preferred pronoun?" formControlName="preferredPronounId">
              <mat-option *ngFor="let pronoun of refData?.pronouns" [value]="pronoun.id" id="pronoun" [disabled]="pronoun.isDisabled">
                {{ pronoun.value }}
              </mat-option>
              <mat-option [value]="null" id="pronouns">Clear Selection</mat-option>
            </mat-select>
          </mat-form-field>
          
        </div>
        <div class="card-column" *ngIf="onOtherPreferredPronounSelected('participantV2Details','preferredPronounId')">
          <mat-form-field appearance="fill">
            <mat-label>Other preferred pronoun</mat-label>
            <input matInput placeholder="Other preferred pronoun" formControlName="otherPreferredPronoun" id="otherPreferredPronoun"
              required>
            <mat-hint>Maximum 100 characters are allowed</mat-hint>
            <mat-error
              *ngIf="personSupportedForm.get('participantV2Details').get('otherPreferredPronoun').hasError('required')">
              Other preferred pronoun  is required</mat-error>
            <mat-error
              *ngIf="personSupportedForm.get('participantV2Details').get('otherPreferredPronoun').hasError('pattern')">
              Invalid Other preferred pronoun</mat-error>
            <mat-error
              *ngIf="personSupportedForm.get('participantV2Details').get('otherPreferredPronoun').hasError('maxlength')">
              Other preferred pronoun should be 100
              characters or less
            </mat-error>
          </mat-form-field>
        </div>
      </div>
      <div class="card-row">
     <div class="card-column">
         <mat-form-field appearance="fill">
          <mat-label for="gender">Gender</mat-label>
          <mat-select placeholder="Gender" formControlName="gender">
            <mat-option *ngFor="let gender of refData?.genders" [value]="gender.id" id="gender"
              [disabled]="gender.isDisabled">{{gender.value}}</mat-option>
              <mat-option [value]="null" id="gender-null"> Clear Selection </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="card-column" *ngIf="onOtherOtherSelected('participantV2Details','gender')">
        <mat-form-field appearance="fill">
          <mat-label>Other Gender</mat-label>
          <input matInput placeholder="Other Gender" formControlName="otherGender" id="otherGender" required >
          <mat-hint>Maximum 100 characters are allowed</mat-hint>
          <mat-error *ngIf="personSupportedForm.get('participantV2Details').get('otherGender').hasError('required')">
            Other gender is required</mat-error>
          <mat-error *ngIf="personSupportedForm.get('participantV2Details').get('otherGender').hasError('pattern')">
            Invalid Other gender</mat-error>
          <mat-error *ngIf="personSupportedForm.get('participantV2Details').get('otherGender').hasError('maxlength')">
            Other gender should be 100
            characters or less
          </mat-error>
        </mat-form-field>
      </div>
      </div>
      
    </div>
    <div class="label-hr"> <span> Contact details </span> </div>
    <div formGroupName="contactDetails">
      <div class="card-row">
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label for="addressLine1">Address line 1</mat-label>
            <input matInput placeholder="Address Line 1" formControlName="addressLine1" id="addressLine1">
            <mat-error *ngIf="personSupportedForm.get('contactDetails').get('addressLine1').hasError('maxlength')">
              Address line 1 should be less than 100 characters.
            </mat-error>
            <mat-error *ngIf="personSupportedForm.get('contactDetails').get('addressLine1').hasError('minlength')">
              Address line 1 should be greater than 3 characters.
            </mat-error>
          </mat-form-field>
        </div>
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label for="addressLine2">Address line 2</mat-label>
            <input matInput placeholder="Address Line 2" formControlName="addressLine2" id="addressLine2">
            <mat-error *ngIf="personSupportedForm.get('contactDetails').get('addressLine2').hasError('maxlength')">
              Address line 2 should be less than 100 characters.
            </mat-error>
            <mat-error *ngIf="personSupportedForm.get('contactDetails').get('addressLine2').hasError('minlength')">
              Address line 2 should be greater than 3 characters.
            </mat-error>
          </mat-form-field>
        </div>
      </div>

      <div class="card-row">
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label for="townOrCity">Town/City</mat-label>
            <input matInput placeholder="Town/City" formControlName="townOrCity" id="townOrCity">
            <mat-error
              *ngIf="personSupportedForm.get('contactDetails').get('townOrCity').hasError('maxlength') && !personSupportedForm.get('contactDetails').get('townOrCity').hasError('pattern')">
              Town/City should be less than 100 characters.
            </mat-error>
            <mat-error *ngIf="personSupportedForm.get('contactDetails').get('townOrCity').hasError('pattern')">
              Invalid Town/City name
            </mat-error>
            <mat-error
              *ngIf="personSupportedForm.get('contactDetails').get('townOrCity').hasError('minlength') && !personSupportedForm.get('contactDetails').get('townOrCity').hasError('pattern')">
              Town/City name should be greater than 3 characters.
            </mat-error>
          </mat-form-field>
        </div>
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label for="county">County</mat-label>
            <input matInput placeholder="County" formControlName="county" id="county">
            <mat-error
              *ngIf="personSupportedForm.get('contactDetails').get('county').hasError('maxlength') && !personSupportedForm.get('contactDetails').get('county').hasError('pattern')">
              County should be less than 100 characters.
            </mat-error>
            <mat-error *ngIf="personSupportedForm.get('contactDetails').get('county').hasError('pattern')">
              Invalid county name
            </mat-error>
            <mat-error
              *ngIf="personSupportedForm.get('contactDetails').get('county').hasError('minlength') && !personSupportedForm.get('contactDetails').get('county').hasError('pattern')">
              County name should be greater than 3 characters.
            </mat-error>
          </mat-form-field>
        </div>
      </div>
      <div class="card-row">
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label for="postCode">Postcode</mat-label>
            <input matInput formControlName="postCode" id="postCode" placeholder="Postcode">
            <mat-hint align="start">Example: SW1A 1AA</mat-hint>
            <mat-error *ngIf="personSupportedForm.get('contactDetails').get('postCode').hasError('pattern')">
              Invalid postcode
            </mat-error>
            <mat-error *ngIf="personSupportedForm.get('contactDetails').get('postCode').hasError('required')">
              Postcode is required
            </mat-error>
          </mat-form-field>
        </div>
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label for="emailAddress">Email address</mat-label>
            <input matInput formControlName="emailAddress" id="emailAddress"
              placeholder="Please Enter a Valid Email Address" required>
            <mat-error>
              <mat-error *ngIf="personSupportedForm.get('contactDetails').get('emailAddress').hasError('pattern')">
                Invalid email address
              </mat-error>
              <mat-error *ngIf="personSupportedForm.get('contactDetails').get('emailAddress').hasError('required')">
                Email address is required
              </mat-error>
            </mat-error>
          </mat-form-field>
        </div>
      </div>
      <div class="card-row">
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label for="contactNo">Your phone number</mat-label>
            <input matInput formControlName="contactNo" id="contactNo" placeholder="Your phone number">
            <mat-error *ngIf="personSupportedForm.get('contactDetails').get('contactNo').hasError('pattern')">
              Your phone number is Invalid
            </mat-error>
            <mat-error *ngIf="personSupportedForm.get('contactDetails').get('contactNo').hasError('required')">
              Your phone number is required
            </mat-error>
          </mat-form-field>
        </div>
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label>
              Preferred contact method
            </mat-label>
            <mat-select placeholder="Preferred contact method" formControlName="preferredContactMethod"  (selectionChange)="onSelection1($event)">
              <mat-option *ngFor="let item of PreferredContactMethodList" [value]="item?.id" id="item">{{item.description}}</mat-option>
              <mat-option id="preferredContactMethod"> Clear Selection </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>
    </div>

    <div class="label-hr"> <span> Emergency contact </span> </div>
    <div formGroupName="emergencyContact">
      <div class="card-row">
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label for="emergencyfirstname">Name of emergency contact</mat-label>
            <input matInput placeholder="Name of emergency contact" formControlName="firstName" id="emergencyfirstname">
            <mat-hint align="start">Maximum 100 characters allowed</mat-hint>
            <mat-error *ngIf="personSupportedForm.get('emergencyContact').get('firstName').hasError('pattern')">
              Invalid Name of emergency contact</mat-error>
            <mat-error *ngIf="personSupportedForm.get('emergencyContact').get('firstName').hasError('maxlength')">
              Name of emergency contact should be 100 characters or less
            </mat-error>
          </mat-form-field>
        </div>
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label for="emergencycontactNo">Emergency contact number</mat-label>
            <input matInput formControlName="contactNo" id="emergencycontactNo" placeholder="Emergency contact number">
            <mat-error *ngIf="personSupportedForm.get('emergencyContact').get('contactNo').hasError('pattern')">
              Invalid Emergency contact number
            </mat-error>
          </mat-form-field>
        </div>
      </div>
      <div class="card-row">
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label for="relationshipWithUser">Relationship to you</mat-label>
            <input matInput formControlName="relationshipWithUser" id="relationshipWithUser"
              placeholder="Relationship to you">
            <mat-hint align="start">Maximum 100 characters allowed</mat-hint>
            <mat-error
              *ngIf="personSupportedForm.get('emergencyContact').get('relationshipWithUser').hasError('maxlength')">
              Relationship to you should be 100 characters or less
            </mat-error>
            <mat-error
              *ngIf="personSupportedForm.get('emergencyContact').get('relationshipWithUser').hasError('minlength')">
              Relationship to you should be greater than 1 char
            </mat-error>
            <mat-error
              *ngIf="personSupportedForm.get('emergencyContact').get('relationshipWithUser').hasError('pattern')">
              Invalid field value
            </mat-error>
          </mat-form-field>
        </div>
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label for="emergencycontactemailaddress">Email address</mat-label>
            <input matInput formControlName="mailAddress" id="emergencycontactemailaddress"
              placeholder="Please Enter a Valid Email Address">
            <mat-error>
              <mat-error *ngIf="personSupportedForm.get('emergencyContact').get('mailAddress').hasError('pattern')">
                Invalid email address
              </mat-error>
            </mat-error>
          </mat-form-field>
        </div>
      </div>
      <div class="card-row">
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label for="emergencycontactaddressLine1">Address line 1</mat-label>
            <input matInput placeholder="Address Line 1" formControlName="addressLine1" id="emergencycontactaddressLine1">
            <mat-error *ngIf="personSupportedForm.get('emergencyContact').get('addressLine1').hasError('maxlength')">
              Address line 1 should be less than 100 characters.
            </mat-error>
            <mat-error *ngIf="personSupportedForm.get('emergencyContact').get('addressLine1').hasError('minlength')">
              Address line 1 should be greater than 3 characters.
            </mat-error>
          </mat-form-field>
        </div>
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label for="emergencycontactaddressLine2">Address line 2</mat-label>
            <input matInput placeholder="Address Line 2" formControlName="addressLine2" id="emergencycontactaddressLine2">
            <mat-error *ngIf="personSupportedForm.get('emergencyContact').get('addressLine2').hasError('maxlength')">
              Address line 2 should be less than 100 characters.
            </mat-error>
            <mat-error *ngIf="personSupportedForm.get('emergencyContact').get('addressLine2').hasError('minlength')">
              Address line 2 should be greater than 3 characters.
            </mat-error>
          </mat-form-field>
        </div>
      </div>
      <div class="card-row">
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label for="emergencycontacttownorcity">Town/City</mat-label>
            <input matInput placeholder="Town/City" formControlName="townOrCity" id="emergencycontacttownorcity">
            <mat-error
              *ngIf="personSupportedForm.get('emergencyContact').get('townOrCity').hasError('maxlength') && !personSupportedForm.get('emergencyContact').get('townOrCity').hasError('pattern')">
              Town/City should be less than 100 characters.
            </mat-error>
            <mat-error *ngIf="personSupportedForm.get('emergencyContact').get('townOrCity').hasError('pattern')">
              Invalid Town/City name
            </mat-error>
            <mat-error
              *ngIf="personSupportedForm.get('emergencyContact').get('townOrCity').hasError('minlength') && !personSupportedForm.get('emergencyContact').get('townOrCity').hasError('pattern')">
              Town/City name should be greater than 3 characters.
            </mat-error>
          </mat-form-field>
        </div>
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label for="emergencycontactcountry">County</mat-label>
            <input matInput placeholder="County" formControlName="country" id="emergencycontactcountry">
            <mat-error
              *ngIf="personSupportedForm.get('emergencyContact').get('country').hasError('maxlength') && !personSupportedForm.get('emergencyContact').get('county').hasError('pattern')">
              County should be less than 100 characters.
            </mat-error>
            <mat-error *ngIf="personSupportedForm.get('emergencyContact').get('country').hasError('pattern')">
              Invalid country name
            </mat-error>
            <mat-error
              *ngIf="personSupportedForm.get('emergencyContact').get('country').hasError('minlength') && !personSupportedForm.get('emergencyContact').get('county').hasError('pattern')">
              County name should be greater than 3 characters.
            </mat-error>
          </mat-form-field>
        </div>
      </div>
      <div class="card-row">
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label for="emergencycontactpostcode">Postcode</mat-label>
            <input matInput formControlName="postcode" id="emergencycontactpostcode" placeholder="Postcode">
            <mat-hint align="start">Example: SW1A 1AA</mat-hint>
            <mat-error *ngIf="personSupportedForm.get('emergencyContact').get('postcode').hasError('pattern')">
              Invalid postcode
            </mat-error>
          </mat-form-field>
        </div>
      </div>
    </div>
    <div class="label-hr"> <span> Referral information </span> </div>
    <div formGroupName="referralInfoV2">
      <div class="card-row">
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label>Who made the referral? </mat-label>
            <input matInput placeholder="Who made the referral? " formControlName="madeReferral" id="madeReferral"
              required>
            <mat-hint>Maximum 100 characters are allowed</mat-hint>
            <mat-error *ngIf="personSupportedForm.get('referralInfoV2').get('madeReferral').hasError('pattern')">
              Invalid referral name</mat-error>
            <mat-error *ngIf="personSupportedForm.get('referralInfoV2').get('madeReferral').hasError('required')">
              Who made the referral is required</mat-error>
            <mat-error *ngIf="personSupportedForm.get('referralInfoV2').get('madeReferral').hasError('maxlength')">
              Who made the referral should be 100 characters or less
            </mat-error>
          </mat-form-field>
        </div>
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label>Contact number</mat-label> 
            <input matInput formControlName="contactNumber" id="contactNumber" placeholder="Contact number" required>
            <mat-error *ngIf="personSupportedForm.get('referralInfoV2').get('contactNumber').hasError('pattern')">
              Contact number is Invalid
            </mat-error>
            <mat-error *ngIf="personSupportedForm.get('referralInfoV2').get('contactNumber').hasError('required')">
              Contact number is required</mat-error>
          </mat-form-field>
        </div>
      </div>
     
      <div class="card-row">
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label>Email address</mat-label>
            <input matInput formControlName="contactEmail" id="contactEmail"
              placeholder="Please enter a valid email address" required>
            <mat-error>
              <mat-error *ngIf="personSupportedForm.get('referralInfoV2').get('contactEmail').hasError('pattern')">
                Invalid email address
              </mat-error>
              <mat-error *ngIf="personSupportedForm.get('referralInfoV2').get('contactEmail').hasError('required')">
                Email address is required
              </mat-error>
            </mat-error>
          </mat-form-field>
        </div>
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label>How did the participant hear about the service? </mat-label>
            <input matInput placeholder="How did the participant hear about the service?"
              formControlName="hearAboutService" id="hearAboutService" required>
            <mat-hint>Maximum 100 characters are allowed</mat-hint>
            <mat-error
              *ngIf="personSupportedForm.get('referralInfoV2').get('hearAboutService').hasError('pattern')">
              Invalid </mat-error>
            <mat-error
              *ngIf="personSupportedForm.get('referralInfoV2').get('hearAboutService').hasError('required')">
              How did the participant hear about the service is required</mat-error>
            <mat-error
              *ngIf="personSupportedForm.get('referralInfoV2').get('hearAboutService').hasError('maxlength')">
              should be 100 characters or less
            </mat-error>
          </mat-form-field>
        </div>
      </div>
      <div class="card-row">
        <div class="card-column">
         <mat-form-field appearance="fill">
           <mat-label>
             How do you know them?
           </mat-label>
           <mat-select placeholder="How do you know them?" formControlName="knowThemId" required>
             <mat-option *ngFor="let item of knowThemList" [value]="item?.id" id="item">{{item.description}}</mat-option>
             <mat-option [value]="null" id="knowThemId-null"> Clear Selection </mat-option>
          
           </mat-select>
           <mat-error *ngIf="personSupportedForm.get('referralInfoV2').get('knowThemId').hasError('required')">
             How do you know them is required
           </mat-error>
         </mat-form-field>
       </div>
       <div class="card-column" *ngIf="onReferalDetailsOtherSelected('referralInfoV2','knowThemId')">
         <mat-form-field appearance="fill">
           <mat-label>Other </mat-label>
           <input matInput placeholder="Other" formControlName="other" id="other" required>
           <mat-hint>Maximum 100 characters are allowed</mat-hint>
           <mat-error *ngIf="personSupportedForm.get('referralInfoV2').get('other').hasError('pattern')">
             Referal details Invalid </mat-error>
           <mat-error *ngIf="personSupportedForm.get('referralInfoV2').get('other').hasError('required')">
             Referal details is required</mat-error>
           <mat-error *ngIf="personSupportedForm.get('referralInfoV2').get('other').hasError('maxlength')">
             Referal details should be 100 characters or less
           </mat-error>
         </mat-form-field>
       </div>
     </div>
      <div class="card-row">
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label>Referral date</mat-label>
            <input matInput [matDatepicker]="referralDate" [max]="maxDateOFReferraldate" [min]="minDateOFReferraldate"
              formControlName="referralDate" placeholder="Referral date" id="referralDate" required>
            <mat-datepicker-toggle matSuffix [for]="referralDate"></mat-datepicker-toggle>
            <mat-datepicker #referralDate></mat-datepicker>
            <mat-error
              *ngIf="personSupportedForm.get('referralInfoV2').get('referralDate').getError('matDatepickerMax')
                                  && !personSupportedForm.get('referralInfoV2').get('referralDate').getError('matDatepickerParse')
                                  && !personSupportedForm.get('referralInfoV2').get('referralDate').getError('required')">
              Invalid Referral date. Participant must be 16 years or older </mat-error>
            <mat-error
              *ngIf="personSupportedForm.get('referralInfoV2').get('referralDate').getError('matDatepickerMin')
                                  && !personSupportedForm.get('referralInfoV2').get('referralDate').getError('matDatepickerParse')
                                  && !personSupportedForm.get('referralInfoV2').get('referralDate').getError('required')">
              Invalid Referral date. Participant must be less than 100 years </mat-error>
            <mat-error
              *ngIf="!personSupportedForm.get('referralInfoV2').get('referralDate').getError('matDatepickerMax')
                                    && !personSupportedForm.get('referralInfoV2').get('referralDate').getError('matDatepickerParse')
                                    && personSupportedForm.get('referralInfoV2').get('referralDate').getError('required')">
                                    Referral date is required
            </mat-error>
            <mat-error
              *ngIf="personSupportedForm.get('referralInfoV2').get('referralDate').errors?.matDatepickerParse">
              Invalid Referral date
            </mat-error>
          </mat-form-field>
        </div>
        <!-- <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label>Referral form identifier</mat-label>
            <input matInput placeholder="Referral form identifier" formControlName="referralForm"
              id="referralForm" required>
            <mat-hint>Maximum 100 characters are allowed</mat-hint>
            <mat-error
              *ngIf="personSupportedForm.get('referralInfoV2').get('referralForm').hasError('pattern')">
              Referral form identifier is Invalid </mat-error>
            <mat-error
              *ngIf="personSupportedForm.get('referralInfoV2').get('referralForm').hasError('required')">
              Referral form identifier is required</mat-error>
            <mat-error
              *ngIf="personSupportedForm.get('referralInfoV2').get('referralForm').hasError('maxlength')">
              Referral form identifier should be 100 characters or less
            </mat-error>
          </mat-form-field>
        </div> -->
      </div>
    </div> 
    <div class="label-hr"> <span> Disabilities and health conditions</span> </div>
    <div formGroupName="disabilityHealth">
      <div class="card-row">
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label>
              Do you have a learning disability?
            </mat-label>
            <mat-select placeholder="Do you have a learning disability?" formControlName="disabilityId">
              <mat-option *ngFor="let item of statusYesNo" [value]="item?.id" id="item">{{item.description}}</mat-option>
              <mat-option [value]="null" id="disabilityId-null"> Clear Selection </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        </div>
        <div class="card-row">
        <div class="card-column" > 
          <mat-form-field appearance="fill">
            <mat-label>
              What are your disabilities?
            </mat-label>
            <mat-select placeholder="What are your disabilities?" formControlName="disabilityChoiceList" multiple required>
              <mat-option *ngFor="let option of disabilitiesList" [value]="option.id" 
                    id="disabilityOrLearningDifficultyIds">
                    {{option.description}}</mat-option>
            </mat-select>
            <mat-error *ngIf="personSupportedForm.get('disabilityHealth').get('disabilityChoiceList').hasError('required')">
              What are your disabilities is required</mat-error>
          </mat-form-field>
        </div>
        
        
          <div class="card-column" *ngIf="onDisabilitiesMultipleOptionSelectd('disabilityHealth','disabilityChoiceList')">
            <mat-form-field appearance="fill">
              <mat-label>Tell us your disabilities as you selected other</mat-label>
              <input matInput placeholder="Tell us your disabilities as you selected other" formControlName="disabilityOther" id="disabilityOther" required>
              <mat-hint>Maximum 100 characters are allowed</mat-hint>
              <mat-error *ngIf="personSupportedForm.get('disabilityHealth').get('disabilityOther').hasError('required')">
                Other disability is required</mat-error>
              <mat-error *ngIf="personSupportedForm.get('disabilityHealth').get('disabilityOther').hasError('pattern')">
                Invalid Other disability name</mat-error>
              <mat-error *ngIf="personSupportedForm.get('disabilityHealth').get('disabilityOther').hasError('maxlength')">
                Other disability should be 100 characters or less        
              </mat-error>
            </mat-form-field>
          </div>
        </div>
     <div class="card-row">
          <div class="card-column">
            <mat-form-field appearance="fill">
              <mat-label>
                Do you have any health conditions? 
              </mat-label>
              <mat-select placeholder="Do you have any health conditions? " formControlName="healthConditionId">
                <mat-option *ngFor="let item of statusYesNo" [value]="item?.id" id="item">{{item.description}}</mat-option>
                <mat-option [value]="null" id="healthConditionId-null"> Clear Selection </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="card-column" *ngIf="onhealthConditionSelected('disabilityHealth','healthConditionId')">
            <mat-form-field appearance="fill">
              <mat-label>
                What are your health conditions?
              </mat-label>
              <mat-select placeholder="What are your health conditions?" formControlName="healthConditionChoiceList" multiple required>
                <mat-option *ngFor="let option of healthCondtionList" [value]="option.id"
                      id="disabilityOrLearningDifficultyIds">
                      {{option.description}}</mat-option>
              </mat-select>
              <mat-error *ngIf="personSupportedForm.get('disabilityHealth').get('healthConditionChoiceList').hasError('required')">
                What are your health conditions is required</mat-error>
            </mat-form-field>
          </div>
          </div> 
          <div class="card-row">
            <div class="card-column" *ngIf="onMultipleOptionForhealthConditionSelectd('disabilityHealth','healthConditionChoiceList')">
              <mat-form-field appearance="fill">
                <mat-label>Tell us your health conditions as you have selected other</mat-label>
                <input matInput placeholder="Tell us your health conditions as you have selected other" formControlName="healthConditionOther" id="healthConditionOther" required>
                <mat-hint>Maximum 100 characters are allowed</mat-hint>
                <mat-error *ngIf="personSupportedForm.get('disabilityHealth').get('healthConditionOther').hasError('required')">
                  Other health condition is required</mat-error>
                <mat-error *ngIf="personSupportedForm.get('disabilityHealth').get('healthConditionOther').hasError('pattern')">
                  Invalid Other health condition Name</mat-error>
                <mat-error *ngIf="personSupportedForm.get('disabilityHealth').get('healthConditionOther').hasError('maxlength')">
                  Other health condition should be 100 characters or less
                </mat-error>
              </mat-form-field>
            </div>
          </div>
           
          <div class="card-row">
            <div class="card-column">
              <mat-form-field appearance="fill">
                <mat-label>
                  Do you have any mental health needs?  
                </mat-label>
                <mat-select placeholder="Do you have any mental health needs?" formControlName="mentalHealthId">
                  <mat-option *ngFor="let item of statusYesNo" [value]="item?.id" id="item">{{item.description}}</mat-option>
                  <mat-option [value]="null" id="mentalHealthId-null"> Clear Selection </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="card-column" *ngIf="onMettalHelthSelected('disabilityHealth','mentalHealthId')">
              <mat-form-field appearance="fill">
                <mat-label>
                  What are your mental health needs?
                </mat-label>
                <mat-select placeholder="What are your mental health needs?" formControlName="mentalHealthChoiceList"  multiple required>
                  <mat-option *ngFor="let option of mentalHealthList" [value]="option.id" 
                  id="mentalHealthChoiceList">
                  {{option.description}}</mat-option>
                </mat-select>
                
                <mat-error *ngIf="personSupportedForm.get('disabilityHealth').get('mentalHealthChoiceList').hasError('required')">
                  What are your mental health needs is required</mat-error>
              </mat-form-field>
            </div>
            </div>
            <div class="card-row">
              <div class="card-column" *ngIf="onMultipleOptionMentalHealthSelectd('disabilityHealth','mentalHealthChoiceList')">
                <mat-form-field appearance="fill">
                  <mat-label> 	Tell us your mental health needs as you have selected other</mat-label>
                  <input matInput placeholder="Tell us your mental health needs as you have selected other" formControlName="mentalHealthOther" id="mentalHealthOther" required>
                  <mat-hint>Maximum 100 characters are allowed</mat-hint>
                  <mat-error *ngIf="personSupportedForm.get('disabilityHealth').get('mentalHealthOther').hasError('required')">
                    Other mental health needs is required</mat-error>
                  <mat-error *ngIf="personSupportedForm.get('disabilityHealth').get('mentalHealthOther').hasError('pattern')">
                    Invalid Other mental health needs </mat-error>
                  <mat-error *ngIf="personSupportedForm.get('disabilityHealth').get('mentalHealthOther').hasError('maxlength')">
                    Other mental health needs should be 100 characters or less 
                  </mat-error>
                </mat-form-field>
              </div>
            </div>
    </div>
    <div class="label-hr"> <span> Education and learning</span> </div>
    <div formGroupName="participantV2Details">
      <div class="card-row">
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label>
              Do you have any previous qualifications?
            </mat-label>
            <mat-select placeholder="Do you have any previous qualifications?"
              formControlName="previousQualificationId">
              <mat-option *ngFor="let item of statsForeducationAndLearning" [value]="item?.id" id="item">{{item.description}}</mat-option>
              <mat-option [value]="null" id="participantV2Details-null"> Clear Selection </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>
    <div *ngIf="onPreviousQualificationSelected('participantV2Details','previousQualificationId')">
        <mat-card-header>
          <span class="spacer"></span>
          <button type="button" (click)="onAddPreviousQualification()" mat-stroked-button color="primary">Add previous
            qualification</button>

        </mat-card-header>
        <mat-label>Previous qualifications </mat-label>  <br>
        <mat-card-content >
          <mat-table id="learners_table" #table [dataSource]=" dataSource ">
            <ng-container matColumnDef="qualificationName">
              <mat-header-cell *matHeaderCellDef id="fullName">
                Qualification name
              </mat-header-cell>
              <mat-cell *matCellDef="let element"><span class="mobile-label">Qualification name: </span>
                {{ element.qualification }}
              </mat-cell>
            </ng-container>
            <ng-container matColumnDef="qualificationLevel">
              <mat-header-cell *matHeaderCellDef id="DateofBirth">
                Qualification level
              </mat-header-cell>
              <mat-cell *matCellDef="let element"><span class="mobile-label">Qualification level: </span>
                {{ element.levelName}}
              </mat-cell>
            </ng-container>
            <ng-container matColumnDef="qualificationStartDate">
              <mat-header-cell *matHeaderCellDef id="Username">
                Qualification start date
              </mat-header-cell>
              <mat-cell *matCellDef="let element"><span class="mobile-label">Qualification Start Date: </span>
                {{ element.startDate | date:'dd MMM yyyy'}}
              </mat-cell>
            </ng-container>
            <ng-container matColumnDef="qualificationDateAchived">
              <mat-header-cell *matHeaderCellDef id="Number">
                Date qualification was achieved
              </mat-header-cell>
              <mat-cell *matCellDef="let element"><span class="mobile-label">Date qualification was achieved: </span>
                {{ element.achievedDate | date:'dd MMM yyyy'}}
              </mat-cell>
            </ng-container>
            <ng-container matColumnDef="actions">
              <mat-header-cell *matHeaderCellDef>Action</mat-header-cell>
              <mat-cell *matCellDef="let element; let i = index;">

                <button id="edit_user_button_{{i}}" mat-icon-button color="primary"
                  (click)="onClickEditPreviousQualification(element,i)" type="button" matTooltip="Edit"
                  [matTooltipShowDelay]="800">
                  <mat-icon>create</mat-icon>
                </button>
                <button id="delete_user_button_{{i}}" mat-icon-button attr.aria-label="Delete" matTooltip="Delete"
                  [matTooltipShowDelay]="800" (click)="onDeletePreviousQualification(element,i)" type="button">
                  <mat-icon color="accent">delete</mat-icon>
                </button>
              </mat-cell>
            </ng-container>
            <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
            <mat-row *matRowDef="let row; columns: displayedColumns; let i = index;"></mat-row>
          </mat-table>
        </mat-card-content>
      </div>
      
      <div class="card-row">
        <div class="card-column">
          <mat-form-field appearance="fill">
            <span class="spacer"></span>
            <mat-label>
              Are you currently working towards a qualification? 
            </mat-label>
            <mat-select placeholder="Are you currently working towards a qualification?"
              formControlName="towardsQualificationId">
              <mat-option *ngFor="let item of statsForeducationAndLearning" [value]="item?.id" id="item">{{item.description}}</mat-option>
              <mat-option [value]="null" id="participantV2Details-null"> Clear Selection </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>
       <div *ngIf="onTowardsQualificationQualificationSelected('participantV2Details','towardsQualificationId')">
        <mat-card-header>
          <span class="spacer"></span>
          <button type="button" (click)="onAddTowardsQualification()" mat-stroked-button color="primary">Add current qualification
            </button>
        </mat-card-header>
        <div>
          <mat-label>Qualifications currently working towards</mat-label>  <br>
        <mat-card-content>
          <mat-table id="learners_table" #table [dataSource]="dataSource1">
            <ng-container matColumnDef="qualificationName">
              <mat-header-cell *matHeaderCellDef id="fullName">
                Qualification name
              </mat-header-cell>
              <mat-cell *matCellDef="let element"><span class="mobile-label">Qualification name: </span>
                {{ element.qualificationTowardsName }}
              </mat-cell>
            </ng-container>
            <ng-container matColumnDef="qualificationStartDate">
              <mat-header-cell *matHeaderCellDef id="Username">
                Qualification start date
              </mat-header-cell>
              <mat-cell *matCellDef="let element"><span class="mobile-label">Qualification Start Date: </span>
                {{ element.startDate | date:'dd MMM yyyy' }}
              </mat-cell>
            </ng-container>
            <ng-container matColumnDef="qualificationDateAchived">
              <mat-header-cell *matHeaderCellDef id="Number">
                Date qualification was achieved
              </mat-header-cell>
              <mat-cell *matCellDef="let element"><span class="mobile-label">Date qualification was achieved: </span>
                {{ element.achievedDate==null ?'Currently working towards':element.achievedDate | date:'dd MMM yyyy'}}
              </mat-cell>
            </ng-container>
            <ng-container matColumnDef="actions">
              <mat-header-cell *matHeaderCellDef>Action</mat-header-cell>
              <mat-cell *matCellDef="let element; let i = index;">
                <button id="edit_user_button_{{i}}" mat-icon-button color="primary"
                  (click)="onClickEditTowardsWorkingQualification(element,i)" type="button" matTooltip="Edit"
                  [matTooltipShowDelay]="800">
                  <mat-icon>create</mat-icon>
                </button>
                <button id="delete_user_button_{{i}}" mat-icon-button attr.aria-label="Delete" matTooltip="Delete"
                  [matTooltipShowDelay]="800" (click)="onDeleteToWordsWorkingQualification(element,i)" type="button">
                  <mat-icon color="accent">delete</mat-icon>
                </button>
              </mat-cell>
            </ng-container>
            <mat-header-row *matHeaderRowDef="towardsQualificationDisplayedColumns"></mat-header-row>
            <mat-row *matRowDef="let row; columns: towardsQualificationDisplayedColumns; let i = index;"></mat-row>
          </mat-table>
        </mat-card-content>
      </div>
      <br>
        <div >
          <mat-label> Qualifications achieved through Unity Works </mat-label>  <br>
          <mat-card-content>
            <mat-table class="table-title" id="learners_table" #table [dataSource]="dataSource2">
              <ng-container matColumnDef="qualificationName">
                <mat-header-cell *matHeaderCellDef id="fullName">
                  Qualification name
                </mat-header-cell>
                <mat-cell *matCellDef="let element"><span class="mobile-label">Qualification name: </span>
                  {{ element.qualificationTowardsName }}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="qualificationStartDate">
                <mat-header-cell *matHeaderCellDef id="Username">
                  Qualification start date
                </mat-header-cell>
                <mat-cell *matCellDef="let element"><span class="mobile-label">Qualification Start Date: </span>
                  {{ element.startDate | date:'dd MMM yyyy' }}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="qualificationDateAchived">
                <mat-header-cell *matHeaderCellDef id="Number">
                  Date qualification was achieved
                </mat-header-cell>
                <mat-cell *matCellDef="let element"><span class="mobile-label">Date qualification was achieved: </span>
                  {{ element.achievedDate | date:'dd MMM yyyy'}}
                </mat-cell>
              </ng-container>
              <ng-container matColumnDef="actions">
                <mat-header-cell *matHeaderCellDef>Action</mat-header-cell>
                <mat-cell *matCellDef="let element; let i = index;">
  
                  <button id="edit_user_button_{{i}}" mat-icon-button color="primary"
                    (click)="onClickEditTowardsQualification(element,i)" type="button" matTooltip="Edit"
                    [matTooltipShowDelay]="800">
                    <mat-icon>create</mat-icon>
                  </button>
                  <button id="delete_user_button_{{i}}" mat-icon-button attr.aria-label="Delete" matTooltip="Delete"
                    [matTooltipShowDelay]="800" (click)="onDeleteToWordsQualification(element,i)" type="button">
                    <mat-icon color="accent">delete</mat-icon>
                  </button>
                </mat-cell>
              </ng-container>
              <mat-header-row *matHeaderRowDef="towardsQualificationDisplayedColumns"></mat-header-row>
              <mat-row *matRowDef="let row; columns: towardsQualificationDisplayedColumns; let i = index;"></mat-row>
            </mat-table>
          </mat-card-content>
        </div> 
      </div> 
   
      <div class="card-row">
        <div class="card-column">
          <mat-form-field appearance="fill">
            <mat-label>
              What job sector are you interested in?
            </mat-label>
            <mat-select placeholder=" What job sector are you interested in?" formControlName="choiceIds"
              multiple (selectionChange)="onSelectionjobsector($event)">
              <mat-option *ngFor="let option of jobSectorInterested" [value]="option.id" id="mentalHealthChoiceList">
                {{option.description}}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

    <div class="card-column"
          *ngIf="onSelectionjobsectorMultipleOptionSelectd('choiceIds')">
          <mat-form-field appearance="fill">
            <mat-label> Other</mat-label>
            <input matInput placeholder="Other"
              formControlName="other" id="mentalHealthOther" required>
            <mat-hint>Maximum 100 characters are allowed</mat-hint>
            <mat-error
              *ngIf="personSupportedForm.get('participantV2Details').get('other').hasError('required')">
              Other  is required</mat-error>
            <mat-error *ngIf="personSupportedForm.get('participantV2Details').get('other').hasError('pattern')">
              Invalid Other mental health needs </mat-error>
            <mat-error
              *ngIf="personSupportedForm.get('participantV2Details').get('other').hasError('maxlength')">
              Other job sector should be 100 characters or less
            </mat-error>
          </mat-form-field>
        </div> 
      </div> 
    </div>
    <mat-card-footer>
      <span class="spacer"></span>
      <span>
        <button type="submit" id="save_user_button" mat-flat-button color="primary"
          [disabled]="isSubmitDisabled() ||contractsCheck || jobCheck || isPreviousQualificationAdded() || isToWardsQualificationAsSelected()">Save</button>
      </span>
    </mat-card-footer>
  </form>
</mat-card>