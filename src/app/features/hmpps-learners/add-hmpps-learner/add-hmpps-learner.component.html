<mat-card id='edit_learners'>

  <mat-card-header>

    <span *ngIf="!isNew">
      <app-stepper-navigation></app-stepper-navigation>
    </span>

    <span class="spacer"></span>

    <div>
      <span class="action-buttons">
        <button id="exit_user_button" mat-stroked-button color="primary" [routerLink]="['/hmpps-learner']">Exit</button>
      </span>
    </div>

  </mat-card-header>

  <mat-card-content>
    <form [formGroup]="learnersForm" (ngSubmit)="onSubmit()" validate autocomplete="off">

      <div class="label-hr"> <span> Participant details </span> </div>

      <div formGroupName="primaryLearnerDetails">

        <div class="card-row">
          
          <div class="card-column">

            <mat-form-field appearance="fill">

              <mat-label>First name</mat-label>

              <input matInput placeholder="First Name" formControlName="firstName" id="firstName" required>

              <mat-hint>Maximum 100 characters are allowed</mat-hint>

              <mat-error *ngIf="learnersForm.get('primaryLearnerDetails').get('firstName').hasError('pattern')">
                Invalid first name</mat-error>

              <mat-error *ngIf="learnersForm.get('primaryLearnerDetails').get('firstName').hasError('required')">
                First name is required</mat-error>

              <mat-error *ngIf="learnersForm.get('primaryLearnerDetails').get('firstName').hasError('maxlength')">
                First name should be 100 characters or less
              </mat-error>

            </mat-form-field>

          </div>
          <div class="card-column">

            <mat-form-field appearance="fill">

              <mat-label>Family/Surname</mat-label>

              <input matInput placeholder="Family/Surname" formControlName="lastName" id="lastName" required>

              <mat-hint>Maximum 100 characters are allowed</mat-hint>

              <mat-error *ngIf="learnersForm.get('primaryLearnerDetails').get('lastName').hasError('required')">
                Family/Surname is required</mat-error>

              <mat-error *ngIf="learnersForm.get('primaryLearnerDetails').get('lastName').hasError('pattern')">
                Invalid Family/Surname Name</mat-error>

              <mat-error *ngIf="learnersForm.get('primaryLearnerDetails').get('lastName').hasError('maxlength')">
                Family/Surname should be 100
                characters or less
              </mat-error>

            </mat-form-field>

          </div>
        </div>

        <div class="card-row">

          <div class="card-column">

            <mat-form-field appearance="fill">

              <mat-label>Email address</mat-label>

              <input matInput formControlName="emailAddress" id="emailAddress"
                placeholder="Please Enter a Valid Email Address" required>

              <mat-error>
                <mat-error *ngIf="learnersForm.get('primaryLearnerDetails').get('emailAddress').hasError('pattern')">
                  Invalid email address
                </mat-error>

                <mat-error *ngIf="learnersForm.get('primaryLearnerDetails').get('emailAddress').hasError('required')">
                  Email address is required
                </mat-error>

              </mat-error>

            </mat-form-field>
          </div>

          <div class="card-column">

            <p>Staff type</p>

            <mat-radio-group formControlName="userCategoryId" required>

              <mat-radio-button class="radio-button" [value]=category.id
                *ngFor="let category of userCategories">{{category.name}}</mat-radio-button>

            </mat-radio-group>
          </div>

        </div>

      </div>
      <br>

      <mat-card-footer>
        <span class="spacer"></span>
        <span>
          <button type="submit" id="save_user_button" mat-flat-button color="primary"
            [disabled]="learnersForm.invalid">Save</button>
        </span>
      </mat-card-footer>

    </form>
  </mat-card-content>
</mat-card>