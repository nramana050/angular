
<head>
  <script src="https://cdn.tiny.cloud/1/mzqn3b3zsz62er536uxvpp1f29oe3pjr7xmturcte7918x6n/tinymce/5/tinymce.min.js" referrerpolicy="origin"></script>
</head>

<!--- HEADER-->
<div class="row">
    <div class="col-md-12"> 
        <div class="card mb-2 font-20">
            <div class="card-header"><strong>{{pageName}} Template</strong>
            </div>
        </div>
    </div>
</div>

<form #createTemplate="ngForm" (ngSubmit)="createTemplate.form.valid  && saveUser(createTemplate)"   autocomplete="off" class="mt-3">

    <div class="row">
        <div class="col-md-6 table-responsive">
            <table class="table"> 
                <tbody>
                  <tr>
                    <td class="width-left"> Name <span class="required-field text-danger">*</span></td>
                    <td>
                        <input type="text" [disabled]="editMode" class="form-control" placeholder="Template Name" 
                            id="templateName" pattern="[A-Za-z][A-Za-z0-9 $&+,:;=?@#|'<>.^*()%!-_]+"
                                [(ngModel)]="userInfo.templateName" name="templateName" 
                                required #templateName="ngModel" (change)="checkDuplicateTemplate()">
    
                            <div *ngIf="createTemplate.submitted && templateName.invalid || templateName.touched">
                                <div *ngIf="templateName.touched || createTemplate.submitted">
                                    <p *ngIf="templateName.errors?.required " class="help-box">Please enter template name!</p>
                                    <p *ngIf="templateName.errors?.pattern " class="help-box">Please enter valid template name!</p>
                                </div>
                            </div>  
                        </td>
                    </tr>
               </tbody>
            </table>
        </div>
        <div class="col-md-6 table-responsive">
            <table class="table">
                <tbody>
                  <tr>
                    <td class="width-left"> Description <span class="required-field text-danger">*</span></td>
                    <td>
                        <textarea class="form-control" rows="4" id="emailDescription" pattern="^[a-zA-Z0-9\x22_ !@#$%^&*()_+\-=\[\]{};':\\|,.<>\/?]*$"
                           placeholder="Enter Description" ng-maxlength="255" [(ngModel)]="userInfo.emailDescription" name="emailDescription"
                                required #emailDescription="ngModel"> </textarea>
    
                        <div *ngIf="createTemplate.submitted && emailDescription.invalid || emailDescription.touched">
                                <div *ngIf="emailDescription.touched || createTemplate.submitted">
                                    <p *ngIf="emailDescription.errors?.required " class="help-box">Please enter template description!</p>
                                </div>
                                <p style="color:red" *ngIf="userInfo.emailDescription?.length > 250">
                                    Description size should be less than 250 characters
                                </p>
                        </div>  
                     </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div>
        <div id="show"><a class="color"><h6>Personalize the template fields
        <i class="fa fa-lightbulb-o bulb-color" aria-hidden="true" ></i></h6></a>
        </div>
        <div id="tr" class="border1">
            <div class="align"> 
            <strong>Tip:</strong> Add merge tags to display your customer's name to make it more personal
            and help to avoid spam filters.
            Try using <strong>*FNAME*</strong>, <strong>*LNAME*</strong>, <strong>*CNAME*</strong> for representing customers/clients<br>
            <i>
                        For example: Dear/Hi, <strong>*FNAME*</strong>&nbsp; <strong>*LNAME*</strong><br>
                        This will be seen as "Dear/Hi, 'John Adams' ", 
                        <strong>*FNAME*</strong> represents First Name, 
                        <strong>*LNAME*</strong> represents Last Name,
                        <strong>*CNAME*</strong> represents Company Name <br>
                        </i>
            </div> 
        </div>
    </div>
    <div class="py-2">
    </div>
    <editor id="styleTemplate" [(ngModel)]="userInfo.styleTemplate" name="styleTemplate" required #styleTemplate="ngModel"
        apiKey="mzqn3b3zsz62er536uxvpp1f29oe3pjr7xmturcte7918x6n"
        [init]="{
        height: 400,
        menubar: false,
        plugins: [
            'advlist autolink lists link image charmap print preview anchor',
            'searchreplace visualblocks code fullscreen',
            'insertdatetime media table paste code help wordcount'
        ],
        toolbar:
            'undo redo | formatselect | bold italic backcolor | \
            alignleft aligncenter alignright alignjustify | \
            bullist numlist outdent indent | removeformat | help | link | image | advlist | charmap | print | preview | searchreplace | visualblocks
            | code | fullscreen | insertdatetime | table | paste | wordcount | image imagetools'
        }"
        
    >
    </editor>

    <div *ngIf="createTemplate.submitted && styleTemplate.invalid || styleTemplate.touched">
        <div *ngIf="styleTemplate.touched || createTemplate.submitted">
            <p *ngIf="styleTemplate.errors?.required " class="help-box">Please create template</p>
        </div>
</div>  

    <div class="modal-body text-center">
        <!-- <h4 class="modal-title mb-4">Please Click here to {{btnName}} the Template</h4> -->
          <button  type="submit" [disabled]="submitFlg" class="btn btn-info mr-2  mb-4"><strong> {{btnName}}</strong></button>
          <button  type="button" class="btn btn-danger mb-4" (click)="Cancel()"><strong>  Cancel  </strong></button>
       
    </div>

</form>
  <script>
    tinymce.init({
      selector: 'textarea',
      plugins: 'a11ychecker advcode casechange formatpainter linkchecker autolink lists checklist media mediaembed pageembed permanentpen powerpaste table advtable tinycomments tinymcespellchecker',
      toolbar: 'a11ycheck addcomment showcomments casechange checklist code formatpainter pageembed permanentpen table',
      toolbar_mode: 'floating',
      tinycomments_mode: 'embedded',
      tinycomments_author: 'Author name'
    });
  </script>

<div class="modal" id="myModal">
        <div class="modal-dialog modal-center">
            <div class="modal-content modal-size">
                <div class="modal-header">
                    <h4 class="modal-title">Tips for creating template</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div> 
                <!-- Modal body -->
                <div class="modal-body ">
                    <div class="text-center">
                    <span>
                        Dear/Hi, *FNAME* <br>
                        This will be seen as "Dear/Hi, 'customer name inside list' "<br>
                        For eg: Dear/Hi, John<br>
                        *FNAME* represents First Name<br>
                        *LNAME* represents Last Name<br>
                        *CNAME* represents Company Name<br>
                        Using these syntax will help you to send dedicated mail to each of your customer/client
                    </span><br>
                    <button  class="btn btn-success" data-dismiss="modal">Ok</button>
                    </div>
                </div>
            </div>
        </div>
    </div>